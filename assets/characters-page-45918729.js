import{j as y,r as L,s as tr,S as De,R as J,L as vr}from"./index-5bcb19cd.js";import{g as sr,E as Ee,a as je,S as xr}from"./site-hero-24a2aeb3.js";function br({data:e}){const a=sr(e.image),s=[];for(let t=0;t<e.comics.length&&!(t>=5);t++)s.push(y.jsx("li",{className:"character-info__list-item",children:e.comics[t].name},t+1));return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"character-info__head",children:[y.jsx("img",{className:"character-info__head-image",src:e.image,alt:`${e.name} image`,style:a}),y.jsxs("div",{className:"character-info__head-body",children:[y.jsx("h3",{className:"character-info__head-name",children:e.name}),y.jsx("a",{className:"button button_red",href:e.home,target:"_blank",rel:"noopener noreferrer",children:"Home page"}),y.jsx("a",{className:"button button_black",href:e.wiki,target:"_blank",rel:"noopener noreferrer",children:"Wiki"})]})]}),y.jsx("p",{className:"character-info__text",children:e.descr||"Character description not found..."}),y.jsxs("div",{className:"character-info__list",children:[y.jsx("h4",{className:"character-info__list-title",children:"Comics:"}),e.comics.length>0?y.jsx("ul",{className:"character-info__list-body",children:s}):y.jsx("p",{className:"character-info__list-text",children:"Not found..."})]})]})}function Ar({text:e}){return y.jsx("div",{className:"character-info__idle",children:y.jsx("h3",{className:"character-info__idle-text",children:e})})}function Vr({className:e,selected:a}){const[s,t]=L.useState(null),[c,l]=L.useState(!1),[o,_]=L.useState(null),v=()=>{a&&(_(null),l(!0),je.getSingleCharacter({id:a}).then(p=>{l(!1),t(p[0])}).catch(p=>{l(!1),_(p)}))};return L.useEffect(()=>{v()},[a]),y.jsxs("div",{className:tr("character-info",e),children:[o?y.jsx(Ee,{className:"character-info__error"}):null,c?y.jsx(De,{className:"character-info__spinner"}):null,!c&&!o&&s?y.jsx(br,{data:s}):null,!c&&!o&&!s?y.jsx(Ar,{text:"Choose a character"}):null]})}const Sr=L.memo(function({data:a,onSelect:s}){const t=sr(a.image),c=()=>{s(a.id)},l=o=>{o.code&&o.code==="Space"&&o.code==="Enter"&&(o.preventDefault(),s(a.id))};return y.jsxs("li",{className:"character-list__item",tabIndex:0,onClick:c,onKeyDown:l,children:[y.jsx("img",{className:"character-list__item-image",src:a.image,alt:`${a.name} image`,style:t}),y.jsx("div",{className:"character-list__item-body",children:y.jsx("h3",{className:"character-list__item-name",children:a.name})})]})});function wr({data:e,onSelect:a}){return y.jsx("ul",{className:"character-list__body",children:e.map(s=>y.jsx(Sr,{data:s,onSelect:a},s.id))})}function Fr({className:e,onSelect:a}){const[t,c]=L.useState(!1),[l,o]=L.useState([]),[_,v]=L.useState(0),[p,M]=L.useState(null),[V,x]=L.useState(!1),U=()=>{M(null),c(!0),je.getAllCharacters({limit:9,offset:_}).then(E=>{c(!1),o(X=>[...X,...E]),v(X=>X+9),x(E.length<9)}).catch(E=>{c(!1),M(E)})};return L.useEffect(()=>{U()},[]),y.jsxs("div",{className:tr("character-list",e),children:[p?y.jsx(Ee,{}):y.jsx(wr,{data:l,onSelect:a}),y.jsx("button",{className:"button button_red character-list__button",style:{display:V?"none":"block"},disabled:t,onClick:U,children:t?y.jsx(De,{}):"Load more"})]})}var oe=e=>e.type==="checkbox",ie=e=>e instanceof Date,T=e=>e==null;const ar=e=>typeof e=="object";var C=e=>!T(e)&&!Array.isArray(e)&&ar(e)&&!ie(e),Nr=e=>C(e)&&e.target?oe(e.target)?e.target.checked:e.target.value:e,pr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,kr=(e,a)=>e.has(pr(a)),Cr=e=>{const a=e.constructor&&e.constructor.prototype;return C(a)&&a.hasOwnProperty("isPrototypeOf")},Le=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function z(e){let a;const s=Array.isArray(e);if(e instanceof Date)a=new Date(e);else if(e instanceof Set)a=new Set(e);else if(!(Le&&(e instanceof Blob||e instanceof FileList))&&(s||C(e)))if(a=s?[]:{},!s&&!Cr(e))a=e;else for(const t in e)e.hasOwnProperty(t)&&(a[t]=z(e[t]));else return e;return a}var fe=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,d=(e,a,s)=>{if(!a||!C(e))return s;const t=fe(a.split(/[,[\].]+?/)).reduce((c,l)=>T(c)?c:c[l],e);return k(t)||t===e?k(e[a])?s:e[a]:t},ee=e=>typeof e=="boolean";const Ge={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},P={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},G={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};J.createContext(null);var Dr=(e,a,s,t=!0)=>{const c={defaultValues:a._defaultValues};for(const l in e)Object.defineProperty(c,l,{get:()=>{const o=l;return a._proxyFormState[o]!==P.all&&(a._proxyFormState[o]=!t||P.all),s&&(s[o]=!0),e[o]}});return c},I=e=>C(e)&&!Object.keys(e).length,Er=(e,a,s,t)=>{s(e);const{name:c,...l}=e;return I(l)||Object.keys(l).length>=Object.keys(a).length||Object.keys(l).find(o=>a[o]===(!t||P.all))},we=e=>Array.isArray(e)?e:[e];function jr(e){const a=J.useRef(e);a.current=e,J.useEffect(()=>{const s=!e.disabled&&a.current.subject&&a.current.subject.subscribe({next:a.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var $=e=>typeof e=="string",Lr=(e,a,s,t,c)=>$(e)?(t&&a.watch.add(e),d(s,e,c)):Array.isArray(e)?e.map(l=>(t&&a.watch.add(l),d(s,l))):(t&&(a.watchAll=!0),s),Te=e=>/^\w*$/.test(e),ir=e=>fe(e.replace(/["|']|\]/g,"").split(/\.|\[/));function S(e,a,s){let t=-1;const c=Te(a)?[a]:ir(a),l=c.length,o=l-1;for(;++t<l;){const _=c[t];let v=s;if(t!==o){const p=e[_];v=C(p)||Array.isArray(p)?p:isNaN(+c[t+1])?{}:[]}e[_]=v,e=e[_]}return e}var Tr=(e,a,s,t,c)=>a?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[t]:c||!0}}:{};const Ce=(e,a,s)=>{for(const t of s||Object.keys(e)){const c=d(e,t);if(c){const{_f:l,...o}=c;if(l&&a(l.name)){if(l.ref.focus){l.ref.focus();break}else if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else C(o)&&Ce(o,a)}}};var ze=e=>({isOnSubmit:!e||e===P.onSubmit,isOnBlur:e===P.onBlur,isOnChange:e===P.onChange,isOnAll:e===P.all,isOnTouch:e===P.onTouched}),Je=(e,a,s)=>!s&&(a.watchAll||a.watch.has(e)||[...a.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))),Or=(e,a,s)=>{const t=fe(d(e,s));return S(t,"root",a[s]),S(e,s,t),e},Oe=e=>e.type==="file",Q=e=>typeof e=="function",ye=e=>{if(!Le)return!1;const a=e?e.ownerDocument:0;return e instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},he=e=>$(e),Re=e=>e.type==="radio",ge=e=>e instanceof RegExp;const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var nr=e=>{if(Array.isArray(e)){if(e.length>1){const a=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:a,isValid:!!a.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe};const Ye={isValid:!1,value:null};var lr=e=>Array.isArray(e)?e.reduce((a,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:a,Ye):Ye;function Ze(e,a,s="validate"){if(he(e)||Array.isArray(e)&&e.every(he)||ee(e)&&!e)return{type:s,message:he(e)?e:"",ref:a}}var ae=e=>C(e)&&!ge(e)?e:{value:e,message:""},er=async(e,a,s,t,c)=>{const{ref:l,refs:o,required:_,maxLength:v,minLength:p,min:M,max:V,pattern:x,validate:U,name:E,valueAsNumber:X,mount:de,disabled:ve}=e._f,m=d(a,E);if(!de||ve)return{};const B=o?o[0]:l,W=A=>{t&&B.reportValidity&&(B.setCustomValidity(ee(A)?"":A||""),B.reportValidity())},D={},ne=Re(l),te=oe(l),xe=ne||te,q=(X||Oe(l))&&k(l.value)&&k(m)||ye(l)&&l.value===""||m===""||Array.isArray(m)&&!m.length,Y=Tr.bind(null,E,s,D),K=(A,b,F,O=G.maxLength,R=G.minLength)=>{const H=A?b:F;D[E]={type:A?O:R,message:H,ref:l,...Y(A?O:R,H)}};if(c?!Array.isArray(m)||!m.length:_&&(!xe&&(q||T(m))||ee(m)&&!m||te&&!nr(o).isValid||ne&&!lr(o).isValid)){const{value:A,message:b}=he(_)?{value:!!_,message:_}:ae(_);if(A&&(D[E]={type:G.required,message:b,ref:B,...Y(G.required,b)},!s))return W(b),D}if(!q&&(!T(M)||!T(V))){let A,b;const F=ae(V),O=ae(M);if(!T(m)&&!isNaN(m)){const R=l.valueAsNumber||m&&+m;T(F.value)||(A=R>F.value),T(O.value)||(b=R<O.value)}else{const R=l.valueAsDate||new Date(m),H=ce=>new Date(new Date().toDateString()+" "+ce),Z=l.type=="time",le=l.type=="week";$(F.value)&&m&&(A=Z?H(m)>H(F.value):le?m>F.value:R>new Date(F.value)),$(O.value)&&m&&(b=Z?H(m)<H(O.value):le?m<O.value:R<new Date(O.value))}if((A||b)&&(K(!!A,F.message,O.message,G.max,G.min),!s))return W(D[E].message),D}if((v||p)&&!q&&($(m)||c&&Array.isArray(m))){const A=ae(v),b=ae(p),F=!T(A.value)&&m.length>+A.value,O=!T(b.value)&&m.length<+b.value;if((F||O)&&(K(F,A.message,b.message),!s))return W(D[E].message),D}if(x&&!q&&$(m)){const{value:A,message:b}=ae(x);if(ge(A)&&!m.match(A)&&(D[E]={type:G.pattern,message:b,ref:l,...Y(G.pattern,b)},!s))return W(b),D}if(U){if(Q(U)){const A=await U(m,a),b=Ze(A,B);if(b&&(D[E]={...b,...Y(G.validate,b.message)},!s))return W(b.message),D}else if(C(U)){let A={};for(const b in U){if(!I(A)&&!s)break;const F=Ze(await U[b](m,a),B,b);F&&(A={...F,...Y(b,F.message)},W(F.message),s&&(D[E]=A))}if(!I(A)&&(D[E]={ref:B,...A},!s))return D}}return W(!0),D};function Rr(e,a){const s=a.slice(0,-1).length;let t=0;for(;t<s;)e=k(e)?t++:e[a[t++]];return e}function Ir(e){for(const a in e)if(e.hasOwnProperty(a)&&!k(e[a]))return!1;return!0}function j(e,a){const s=Array.isArray(a)?a:Te(a)?[a]:ir(a),t=s.length===1?e:Rr(e,s),c=s.length-1,l=s[c];return t&&delete t[l],c!==0&&(C(t)&&I(t)||Array.isArray(t)&&Ir(t))&&j(e,s.slice(0,-1)),e}function Fe(){let e=[];return{get observers(){return e},next:c=>{for(const l of e)l.next&&l.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(l=>l!==c)}}),unsubscribe:()=>{e=[]}}}var _e=e=>T(e)||!ar(e);function re(e,a){if(_e(e)||_e(a))return e===a;if(ie(e)&&ie(a))return e.getTime()===a.getTime();const s=Object.keys(e),t=Object.keys(a);if(s.length!==t.length)return!1;for(const c of s){const l=e[c];if(!t.includes(c))return!1;if(c!=="ref"){const o=a[c];if(ie(l)&&ie(o)||C(l)&&C(o)||Array.isArray(l)&&Array.isArray(o)?!re(l,o):l!==o)return!1}}return!0}var cr=e=>e.type==="select-multiple",Mr=e=>Re(e)||oe(e),Ne=e=>ye(e)&&e.isConnected,ur=e=>{for(const a in e)if(Q(e[a]))return!0;return!1};function me(e,a={}){const s=Array.isArray(e);if(C(e)||s)for(const t in e)Array.isArray(e[t])||C(e[t])&&!ur(e[t])?(a[t]=Array.isArray(e[t])?[]:{},me(e[t],a[t])):T(e[t])||(a[t]=!0);return a}function or(e,a,s){const t=Array.isArray(e);if(C(e)||t)for(const c in e)Array.isArray(e[c])||C(e[c])&&!ur(e[c])?k(a)||_e(s[c])?s[c]=Array.isArray(e[c])?me(e[c],[]):{...me(e[c])}:or(e[c],T(a)?{}:a[c],s[c]):s[c]=!re(e[c],a[c]);return s}var pe=(e,a)=>or(e,a,me(a)),fr=(e,{valueAsNumber:a,valueAsDate:s,setValueAs:t})=>k(e)?e:a?e===""?NaN:e&&+e:s&&$(e)?new Date(e):t?t(e):e;function ke(e){const a=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):a.disabled))return Oe(a)?a.files:Re(a)?lr(e.refs).value:cr(a)?[...a.selectedOptions].map(({value:s})=>s):oe(a)?nr(e.refs).value:fr(k(a.value)?e.ref.value:a.value,e)}var Ur=(e,a,s,t)=>{const c={};for(const l of e){const o=d(a,l);o&&S(c,l,o._f)}return{criteriaMode:s,names:[...e],fields:c,shouldUseNativeValidation:t}},ue=e=>k(e)?e:ge(e)?e.source:C(e)?ge(e.value)?e.value.source:e.value:e,Br=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function rr(e,a,s){const t=d(e,s);if(t||Te(s))return{error:t,name:s};const c=s.split(".");for(;c.length;){const l=c.join("."),o=d(a,l),_=d(e,l);if(o&&!Array.isArray(o)&&s!==l)return{name:s};if(_&&_.type)return{name:l,error:_};c.pop()}return{name:s}}var Pr=(e,a,s,t,c)=>c.isOnAll?!1:!s&&c.isOnTouch?!(a||e):(s?t.isOnBlur:c.isOnBlur)?!e:(s?t.isOnChange:c.isOnChange)?e:!0,qr=(e,a)=>!fe(d(e,a)).length&&j(e,a);const Hr={mode:P.onSubmit,reValidateMode:P.onChange,shouldFocusError:!0};function $r(e={},a){let s={...Hr,...e},t={submitCount:0,isDirty:!1,isLoading:Q(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},c={},l=C(s.defaultValues)||C(s.values)?z(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:z(l),_={action:!1,mount:!1,watch:!1},v={mount:new Set,unMount:new Set,array:new Set,watch:new Set},p,M=0;const V={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:Fe(),array:Fe(),state:Fe()},U=e.resetOptions&&e.resetOptions.keepDirtyValues,E=ze(s.mode),X=ze(s.reValidateMode),de=s.criteriaMode===P.all,ve=r=>i=>{clearTimeout(M),M=setTimeout(r,i)},m=async r=>{if(V.isValid||r){const i=s.resolver?I((await q()).errors):await K(c,!0);i!==t.isValid&&x.state.next({isValid:i})}},B=r=>V.isValidating&&x.state.next({isValidating:r}),W=(r,i=[],n,h,f=!0,u=!0)=>{if(h&&n){if(_.action=!0,u&&Array.isArray(d(c,r))){const g=n(d(c,r),h.argA,h.argB);f&&S(c,r,g)}if(u&&Array.isArray(d(t.errors,r))){const g=n(d(t.errors,r),h.argA,h.argB);f&&S(t.errors,r,g),qr(t.errors,r)}if(V.touchedFields&&u&&Array.isArray(d(t.touchedFields,r))){const g=n(d(t.touchedFields,r),h.argA,h.argB);f&&S(t.touchedFields,r,g)}V.dirtyFields&&(t.dirtyFields=pe(l,o)),x.state.next({name:r,isDirty:b(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else S(o,r,i)},D=(r,i)=>{S(t.errors,r,i),x.state.next({errors:t.errors})},ne=(r,i,n,h)=>{const f=d(c,r);if(f){const u=d(o,r,k(n)?d(l,r):n);k(u)||h&&h.defaultChecked||i?S(o,r,i?u:ke(f._f)):R(r,u),_.mount&&m()}},te=(r,i,n,h,f)=>{let u=!1,g=!1;const w={name:r};if(!n||h){V.isDirty&&(g=t.isDirty,t.isDirty=w.isDirty=b(),u=g!==w.isDirty);const N=re(d(l,r),i);g=d(t.dirtyFields,r),N?j(t.dirtyFields,r):S(t.dirtyFields,r,!0),w.dirtyFields=t.dirtyFields,u=u||V.dirtyFields&&g!==!N}if(n){const N=d(t.touchedFields,r);N||(S(t.touchedFields,r,n),w.touchedFields=t.touchedFields,u=u||V.touchedFields&&N!==n)}return u&&f&&x.state.next(w),u?w:{}},xe=(r,i,n,h)=>{const f=d(t.errors,r),u=V.isValid&&ee(i)&&t.isValid!==i;if(e.delayError&&n?(p=ve(()=>D(r,n)),p(e.delayError)):(clearTimeout(M),p=null,n?S(t.errors,r,n):j(t.errors,r)),(n?!re(f,n):f)||!I(h)||u){const g={...h,...u&&ee(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...g},x.state.next(g)}B(!1)},q=async r=>s.resolver(o,s.context,Ur(r||v.mount,c,s.criteriaMode,s.shouldUseNativeValidation)),Y=async r=>{const{errors:i}=await q(r);if(r)for(const n of r){const h=d(i,n);h?S(t.errors,n,h):j(t.errors,n)}else t.errors=i;return i},K=async(r,i,n={valid:!0})=>{for(const h in r){const f=r[h];if(f){const{_f:u,...g}=f;if(u){const w=v.array.has(u.name),N=await er(f,o,de,s.shouldUseNativeValidation&&!i,w);if(N[u.name]&&(n.valid=!1,i))break;!i&&(d(N,u.name)?w?Or(t.errors,N,u.name):S(t.errors,u.name,N[u.name]):j(t.errors,u.name))}g&&await K(g,i,n)}}return n.valid},A=()=>{for(const r of v.unMount){const i=d(c,r);i&&(i._f.refs?i._f.refs.every(n=>!Ne(n)):!Ne(i._f.ref))&&be(r)}v.unMount=new Set},b=(r,i)=>(r&&i&&S(o,r,i),!re(Ie(),l)),F=(r,i,n)=>Lr(r,v,{..._.mount?o:k(i)?l:$(r)?{[r]:i}:i},n,i),O=r=>fe(d(_.mount?o:l,r,e.shouldUnregister?d(l,r,[]):[])),R=(r,i,n={})=>{const h=d(c,r);let f=i;if(h){const u=h._f;u&&(!u.disabled&&S(o,r,fr(i,u)),f=ye(u.ref)&&T(i)?"":i,cr(u.ref)?[...u.ref.options].forEach(g=>g.selected=f.includes(g.value)):u.refs?oe(u.ref)?u.refs.length>1?u.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(f)?!!f.find(w=>w===g.value):f===g.value)):u.refs[0]&&(u.refs[0].checked=!!f):u.refs.forEach(g=>g.checked=g.value===f):Oe(u.ref)?u.ref.value="":(u.ref.value=f,u.ref.type||x.values.next({name:r,values:{...o}})))}(n.shouldDirty||n.shouldTouch)&&te(r,f,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&ce(r)},H=(r,i,n)=>{for(const h in i){const f=i[h],u=`${r}.${h}`,g=d(c,u);(v.array.has(r)||!_e(f)||g&&!g._f)&&!ie(f)?H(u,f,n):R(u,f,n)}},Z=(r,i,n={})=>{const h=d(c,r),f=v.array.has(r),u=z(i);S(o,r,u),f?(x.array.next({name:r,values:{...o}}),(V.isDirty||V.dirtyFields)&&n.shouldDirty&&x.state.next({name:r,dirtyFields:pe(l,o),isDirty:b(r,u)})):h&&!h._f&&!T(u)?H(r,u,n):R(r,u,n),Je(r,v)&&x.state.next({...t}),x.values.next({name:r,values:{...o}}),!_.mount&&a()},le=async r=>{const i=r.target;let n=i.name,h=!0;const f=d(c,n),u=()=>i.type?ke(f._f):Nr(r);if(f){let g,w;const N=u(),se=r.type===Ge.BLUR||r.type===Ge.FOCUS_OUT,gr=!Br(f._f)&&!s.resolver&&!d(t.errors,n)&&!f._f.deps||Pr(se,d(t.touchedFields,n),t.isSubmitted,X,E),Ve=Je(n,v,se);S(o,n,N),se?(f._f.onBlur&&f._f.onBlur(r),p&&p(0)):f._f.onChange&&f._f.onChange(r);const Se=te(n,N,se,!1),_r=!I(Se)||Ve;if(!se&&x.values.next({name:n,type:r.type,values:{...o}}),gr)return V.isValid&&m(),_r&&x.state.next({name:n,...Ve?{}:Se});if(!se&&Ve&&x.state.next({...t}),B(!0),s.resolver){const{errors:We}=await q([n]),mr=rr(t.errors,c,n),Ke=rr(We,c,mr.name||n);g=Ke.error,n=Ke.name,w=I(We)}else g=(await er(f,o,de,s.shouldUseNativeValidation))[n],h=Number.isNaN(N)||N===d(o,n,N),h&&(g?w=!1:V.isValid&&(w=await K(c,!0)));h&&(f._f.deps&&ce(f._f.deps),xe(n,w,g,Se))}},ce=async(r,i={})=>{let n,h;const f=we(r);if(B(!0),s.resolver){const u=await Y(k(r)?r:f);n=I(u),h=r?!f.some(g=>d(u,g)):n}else r?(h=(await Promise.all(f.map(async u=>{const g=d(c,u);return await K(g&&g._f?{[u]:g}:g)}))).every(Boolean),!(!h&&!t.isValid)&&m()):h=n=await K(c);return x.state.next({...!$(r)||V.isValid&&n!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:n}:{},errors:t.errors,isValidating:!1}),i.shouldFocus&&!h&&Ce(c,u=>u&&d(t.errors,u),r?f:v.mount),h},Ie=r=>{const i={...l,..._.mount?o:{}};return k(r)?i:$(r)?d(i,r):r.map(n=>d(i,n))},Me=(r,i)=>({invalid:!!d((i||t).errors,r),isDirty:!!d((i||t).dirtyFields,r),isTouched:!!d((i||t).touchedFields,r),error:d((i||t).errors,r)}),dr=r=>{r&&we(r).forEach(i=>j(t.errors,i)),x.state.next({errors:r?t.errors:{}})},Ue=(r,i,n)=>{const h=(d(c,r,{_f:{}})._f||{}).ref;S(t.errors,r,{...i,ref:h}),x.state.next({name:r,errors:t.errors,isValid:!1}),n&&n.shouldFocus&&h&&h.focus&&h.focus()},hr=(r,i)=>Q(r)?x.values.subscribe({next:n=>r(F(void 0,i),n)}):F(r,i,!0),be=(r,i={})=>{for(const n of r?we(r):v.mount)v.mount.delete(n),v.array.delete(n),i.keepValue||(j(c,n),j(o,n)),!i.keepError&&j(t.errors,n),!i.keepDirty&&j(t.dirtyFields,n),!i.keepTouched&&j(t.touchedFields,n),!s.shouldUnregister&&!i.keepDefaultValue&&j(l,n);x.values.next({values:{...o}}),x.state.next({...t,...i.keepDirty?{isDirty:b()}:{}}),!i.keepIsValid&&m()},Be=({disabled:r,name:i,field:n,fields:h})=>{if(ee(r)){const f=r?void 0:d(o,i,ke(n?n._f:d(h,i)._f));S(o,i,f),te(i,f,!1,!1,!0)}},Ae=(r,i={})=>{let n=d(c,r);const h=ee(i.disabled);return S(c,r,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:r}},name:r,mount:!0,...i}}),v.mount.add(r),n?Be({field:n,disabled:i.disabled,name:r}):ne(r,!0,i.value),{...h?{disabled:i.disabled}:{},...s.progressive?{required:!!i.required,min:ue(i.min),max:ue(i.max),minLength:ue(i.minLength),maxLength:ue(i.maxLength),pattern:ue(i.pattern)}:{},name:r,onChange:le,onBlur:le,ref:f=>{if(f){Ae(r,i),n=d(c,r);const u=k(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,g=Mr(u),w=n._f.refs||[];if(g?w.find(N=>N===u):u===n._f.ref)return;S(c,r,{_f:{...n._f,...g?{refs:[...w.filter(Ne),u,...Array.isArray(d(l,r))?[{}]:[]],ref:{type:u.type,name:r}}:{ref:u}}}),ne(r,!1,void 0,u)}else n=d(c,r,{}),n._f&&(n._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(kr(v.array,r)&&_.action)&&v.unMount.add(r)}}},Pe=()=>s.shouldFocusError&&Ce(c,r=>r&&d(t.errors,r),v.mount),qe=(r,i)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let h=z(o);if(x.state.next({isSubmitting:!0}),s.resolver){const{errors:f,values:u}=await q();t.errors=f,h=u}else await K(c);j(t.errors,"root"),I(t.errors)?(x.state.next({errors:{}}),await r(h,n)):(i&&await i({...t.errors},n),Pe(),setTimeout(Pe)),x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(t.errors),submitCount:t.submitCount+1,errors:t.errors})},yr=(r,i={})=>{d(c,r)&&(k(i.defaultValue)?Z(r,d(l,r)):(Z(r,i.defaultValue),S(l,r,i.defaultValue)),i.keepTouched||j(t.touchedFields,r),i.keepDirty||(j(t.dirtyFields,r),t.isDirty=i.defaultValue?b(r,d(l,r)):b()),i.keepError||(j(t.errors,r),V.isValid&&m()),x.state.next({...t}))},He=(r,i={})=>{const n=r?z(r):l,h=z(n),f=r&&!I(r)?h:l;if(i.keepDefaultValues||(l=n),!i.keepValues){if(i.keepDirtyValues||U)for(const u of v.mount)d(t.dirtyFields,u)?S(f,u,d(o,u)):Z(u,d(f,u));else{if(Le&&k(r))for(const u of v.mount){const g=d(c,u);if(g&&g._f){const w=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;if(ye(w)){const N=w.closest("form");if(N){N.reset();break}}}}c={}}o=e.shouldUnregister?i.keepDefaultValues?z(l):{}:z(f),x.array.next({values:{...f}}),x.values.next({values:{...f}})}v={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!_.mount&&a(),_.mount=!V.isValid||!!i.keepIsValid,_.watch=!!e.shouldUnregister,x.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!re(r,l)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:i.keepDirtyValues?t.dirtyFields:i.keepDefaultValues&&r?pe(l,r):{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},$e=(r,i)=>He(Q(r)?r(o):r,i);return{control:{register:Ae,unregister:be,getFieldState:Me,handleSubmit:qe,setError:Ue,_executeSchema:q,_getWatch:F,_getDirty:b,_updateValid:m,_removeUnmounted:A,_updateFieldArray:W,_updateDisabledField:Be,_getFieldArray:O,_reset:He,_resetDefaultValues:()=>Q(s.defaultValues)&&s.defaultValues().then(r=>{$e(r,s.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_subjects:x,_proxyFormState:V,get _fields(){return c},get _formValues(){return o},get _state(){return _},set _state(r){_=r},get _defaultValues(){return l},get _names(){return v},set _names(r){v=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:ce,register:Ae,handleSubmit:qe,watch:hr,setValue:Z,getValues:Ie,reset:$e,resetField:yr,clearErrors:dr,unregister:be,setError:Ue,setFocus:(r,i={})=>{const n=d(c,r),h=n&&n._f;if(h){const f=h.refs?h.refs[0]:h.ref;f.focus&&(f.focus(),i.shouldSelect&&f.select())}},getFieldState:Me}}function Wr(e={}){const a=J.useRef(),s=J.useRef(),[t,c]=J.useState({isDirty:!1,isValidating:!1,isLoading:Q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Q(e.defaultValues)?void 0:e.defaultValues});a.current||(a.current={...$r(e,()=>c(o=>({...o}))),formState:t});const l=a.current.control;return l._options=e,jr({subject:l._subjects.state,next:o=>{Er(o,l._proxyFormState,l._updateFormState,!0)&&c({...l._formState})}}),J.useEffect(()=>{e.values&&!re(e.values,s.current)?(l._reset(e.values,l._options.resetOptions),s.current=e.values):l._resetDefaultValues()},[e.values,l]),J.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),a.current.formState=Dr(t,l),a.current}function Kr(){const{register:e,handleSubmit:a,formState:s}=Wr(),[t,c]=L.useState(null),[l,o]=L.useState(!1),[_,v]=L.useState(null),p=({name:M})=>{v(null),o(!0),je.getSingleCharacterByName({name:M}).then(V=>{o(!1),c(V.length?V[0]:"not-found")}).catch(V=>{o(!1),v(V)})};return y.jsxs("div",{className:"character-search",children:[y.jsxs("div",{className:"character-search__form",children:[y.jsx("h3",{className:"character-search__form-title",children:"Or find a character by name:"}),y.jsxs("form",{className:"character-search__form-body",onSubmit:a(p),children:[y.jsx("input",{type:"text",className:"character-search__form-input",placeholder:"Enter name",defaultValue:"",...e("name",{required:!0})}),y.jsx("button",{className:"button button_red character-search__form-button",type:"submit",children:"FIND"})]})]}),y.jsxs("div",{className:"character-search__main",children:[_&&y.jsx(Ee,{className:"character-search__main-error"}),l&&y.jsx(De,{className:"character-search__main-spinner"}),!l&&!_&&s.errors.name&&y.jsx("p",{className:"character-search__main-warning",children:"Please, enter a character name!"}),!l&&!_&&!s.errors.name&&t==="not-found"&&y.jsx("p",{className:"character-search__main-warning",children:"The character was not found. Check the name and try again."}),!l&&!_&&!s.errors.name&&t!=="not-found"&&t&&y.jsxs("div",{className:"character-search__main-result",children:[y.jsx("p",{className:"character-search__main-reuslt-text",children:`There is! Visit ${t.name} page?`}),y.jsx(vr,{className:"button button_black character-search__main-button",to:`/characters/${t.id}`,children:"TO PAGE"})]})]})]})}function Gr(){const[e,a]=L.useState(null),s=L.useCallback(t=>{a(t)},[]);return y.jsx("section",{className:"section all-caharacters",children:y.jsxs("div",{className:"container all-caharacters__container",children:[y.jsx("h2",{className:"title all-caharacters__title",children:"All characters"}),y.jsxs("div",{className:"all-caharacters__body",children:[y.jsx("div",{className:"all-caharacters__list",children:y.jsx(Fr,{onSelect:s})}),y.jsxs("div",{className:"all-caharacters__sidebar",children:[y.jsx(Vr,{selected:e}),y.jsx(Kr,{})]})]})]})})}function Zr(){return y.jsxs(y.Fragment,{children:[y.jsx(xr,{title:"Marvel characters"}),y.jsx(Gr,{})]})}export{Zr as default};
