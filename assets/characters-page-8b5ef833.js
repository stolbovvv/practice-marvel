import{g as tr,j as d,r as L,s as sr,S as je,R as J,L as vr}from"./index-54acc16d.js";import{H as xr}from"./Helmet-7b6977b3.js";import{E as Ee,a as Ce,S as br}from"./site-hero-2f51aee2.js";import{u as Ar}from"./useList-0cdc33ff.js";function Vr({data:e}){const a=tr(e.image),s=[];for(let t=0;t<e.comics.length&&!(t>=5);t++)s.push(d.jsx("li",{className:"character-info__list-item",children:e.comics[t].name},t+1));return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"character-info__head",children:[d.jsx("img",{className:"character-info__head-image",src:e.image,alt:`${e.name} image`,style:a}),d.jsxs("div",{className:"character-info__head-body",children:[d.jsx("h3",{className:"character-info__head-name",children:e.name}),d.jsx("a",{className:"button button_red",href:e.home,target:"_blank",rel:"noopener noreferrer",children:"Home page"}),d.jsx("a",{className:"button button_black",href:e.wiki,target:"_blank",rel:"noopener noreferrer",children:"Wiki"})]})]}),d.jsx("p",{className:"character-info__text",children:e.descr||"Character description not found..."}),d.jsxs("div",{className:"character-info__list",children:[d.jsx("h4",{className:"character-info__list-title",children:"Comics:"}),e.comics.length>0?d.jsx("ul",{className:"character-info__list-body",children:s}):d.jsx("p",{className:"character-info__list-text",children:"Not found..."})]})]})}function pr({text:e}){return d.jsx("div",{className:"character-info__idle",children:d.jsx("h3",{className:"character-info__idle-text",children:e})})}function Sr({className:e,selected:a}){const[s,t]=L.useState(null),[l,n]=L.useState("pending"),[o,x]=L.useState(null),_=()=>{a&&(x(null),n("loading"),Ce.getSingleCharacter({id:a}).then(p=>{t(p[0]),n("success")}).catch(p=>{x(p),n("failure")}))};return L.useEffect(()=>{_()},[a]),d.jsxs("div",{className:sr("character-info",e),children:[l==="pending"&&d.jsx(pr,{text:"Choose a character"}),l==="loading"&&d.jsx(je,{className:"character-info__spinner"}),l==="success"&&d.jsx(Vr,{data:s}),l==="failure"&&d.jsx(Ee,{className:"character-info__error",info:o.message})]})}const wr=L.memo(function({data:a,onSelect:s}){const t=tr(a.image),l=()=>{s(a.id)},n=o=>{o.code&&o.code==="Space"&&o.code==="Enter"&&(o.preventDefault(),s(a.id))};return d.jsxs("li",{className:"character-list__item",tabIndex:0,onClick:l,onKeyDown:n,children:[d.jsx("img",{className:"character-list__item-image",src:a.image,alt:`${a.name} image`,style:t}),d.jsx("div",{className:"character-list__item-body",children:d.jsx("h3",{className:"character-list__item-name",children:a.name})})]})});function Fr({data:e,onSelect:a}){return d.jsx("ul",{className:"character-list__body",children:e.map(s=>d.jsx(wr,{data:s,onSelect:a},s.id))})}function Nr({className:e,onSelect:a}){const[s,t]=Ar({initLimit:9}),[l,n]=L.useState("pending"),[o,x]=L.useState(null),_=()=>{x(null),n("loading"),Ce.getAllCharacters({limit:s.limit,offset:s.offset}).then(p=>{t({data:p}),n("success")}).catch(p=>{x(p),n("failure")})};return L.useEffect(()=>{_()},[]),L.useEffect(()=>{s.ended&&n("ending")},[s.ended]),d.jsxs("div",{className:sr("character-list",e),children:[l==="failure"&&d.jsx(Ee,{info:o.message}),l!=="failure"&&d.jsx(Fr,{data:s.list,onSelect:a}),l==="loading"&&d.jsx(je,{size:"2.625rem",style:{marginInline:"auto"}}),l!=="loading"&&l!=="ending"&&d.jsx("button",{className:"button button_red character-list__button",onClick:_,children:"Load more"})]})}var ue=e=>e.type==="checkbox",ae=e=>e instanceof Date,C=e=>e==null;const ar=e=>typeof e=="object";var k=e=>!C(e)&&!Array.isArray(e)&&ar(e)&&!ae(e),Dr=e=>k(e)&&e.target?ue(e.target)?e.target.checked:e.target.value:e,kr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,jr=(e,a)=>e.has(kr(a)),Er=e=>{const a=e.constructor&&e.constructor.prototype;return k(a)&&a.hasOwnProperty("isPrototypeOf")},Le=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function z(e){let a;const s=Array.isArray(e);if(e instanceof Date)a=new Date(e);else if(e instanceof Set)a=new Set(e);else if(!(Le&&(e instanceof Blob||e instanceof FileList))&&(s||k(e)))if(a=s?[]:{},!s&&!Er(e))a=e;else for(const t in e)e.hasOwnProperty(t)&&(a[t]=z(e[t]));else return e;return a}var oe=e=>Array.isArray(e)?e.filter(Boolean):[],D=e=>e===void 0,h=(e,a,s)=>{if(!a||!k(e))return s;const t=oe(a.split(/[,[\].]+?/)).reduce((l,n)=>C(l)?l:l[n],e);return D(t)||t===e?D(e[a])?s:e[a]:t},Z=e=>typeof e=="boolean";const ze={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},U={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},K={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};J.createContext(null);var Cr=(e,a,s,t=!0)=>{const l={defaultValues:a._defaultValues};for(const n in e)Object.defineProperty(l,n,{get:()=>{const o=n;return a._proxyFormState[o]!==U.all&&(a._proxyFormState[o]=!t||U.all),s&&(s[o]=!0),e[o]}});return l},R=e=>k(e)&&!Object.keys(e).length,Lr=(e,a,s,t)=>{s(e);const{name:l,...n}=e;return R(n)||Object.keys(n).length>=Object.keys(a).length||Object.keys(n).find(o=>a[o]===(!t||U.all))},Se=e=>Array.isArray(e)?e:[e];function Or(e){const a=J.useRef(e);a.current=e,J.useEffect(()=>{const s=!e.disabled&&a.current.subject&&a.current.subject.subscribe({next:a.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var q=e=>typeof e=="string",Tr=(e,a,s,t,l)=>q(e)?(t&&a.watch.add(e),h(s,e,l)):Array.isArray(e)?e.map(n=>(t&&a.watch.add(n),h(s,n))):(t&&(a.watchAll=!0),s),Oe=e=>/^\w*$/.test(e),ir=e=>oe(e.replace(/["|']|\]/g,"").split(/\.|\[/));function V(e,a,s){let t=-1;const l=Oe(a)?[a]:ir(a),n=l.length,o=n-1;for(;++t<n;){const x=l[t];let _=s;if(t!==o){const p=e[x];_=k(p)||Array.isArray(p)?p:isNaN(+l[t+1])?{}:[]}e[x]=_,e=e[x]}return e}var Mr=(e,a,s,t,l)=>a?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[t]:l||!0}}:{};const ke=(e,a,s)=>{for(const t of s||Object.keys(e)){const l=h(e,t);if(l){const{_f:n,...o}=l;if(n&&a(n.name)){if(n.ref.focus){n.ref.focus();break}else if(n.refs&&n.refs[0].focus){n.refs[0].focus();break}}else k(o)&&ke(o,a)}}};var Ge=e=>({isOnSubmit:!e||e===U.onSubmit,isOnBlur:e===U.onBlur,isOnChange:e===U.onChange,isOnAll:e===U.all,isOnTouch:e===U.onTouched}),Je=(e,a,s)=>!s&&(a.watchAll||a.watch.has(e)||[...a.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))),Rr=(e,a,s)=>{const t=oe(h(e,s));return V(t,"root",a[s]),V(e,s,t),e},Te=e=>e.type==="file",Q=e=>typeof e=="function",he=e=>{if(!Le)return!1;const a=e?e.ownerDocument:0;return e instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},de=e=>q(e),Me=e=>e.type==="radio",ye=e=>e instanceof RegExp;const Qe={value:!1,isValid:!1},Xe={value:!0,isValid:!0};var nr=e=>{if(Array.isArray(e)){if(e.length>1){const a=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:a,isValid:!!a.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!D(e[0].attributes.value)?D(e[0].value)||e[0].value===""?Xe:{value:e[0].value,isValid:!0}:Xe:Qe}return Qe};const Ye={isValid:!1,value:null};var cr=e=>Array.isArray(e)?e.reduce((a,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:a,Ye):Ye;function Ze(e,a,s="validate"){if(de(e)||Array.isArray(e)&&e.every(de)||Z(e)&&!e)return{type:s,message:de(e)?e:"",ref:a}}var se=e=>k(e)&&!ye(e)?e:{value:e,message:""},er=async(e,a,s,t,l)=>{const{ref:n,refs:o,required:x,maxLength:_,minLength:p,min:H,max:w,pattern:m,validate:G,name:T,valueAsNumber:_e,mount:fe,disabled:ve}=e._f,v=h(a,T);if(!fe||ve)return{};const I=o?o[0]:n,$=A=>{t&&I.reportValidity&&(I.setCustomValidity(Z(A)?"":A||""),I.reportValidity())},j={},ie=Me(n),re=ue(n),xe=ie||re,P=(_e||Te(n))&&D(n.value)&&D(v)||he(n)&&n.value===""||v===""||Array.isArray(v)&&!v.length,X=Mr.bind(null,T,s,j),W=(A,b,F,O=K.maxLength,M=K.minLength)=>{const B=A?b:F;j[T]={type:A?O:M,message:B,ref:n,...X(A?O:M,B)}};if(l?!Array.isArray(v)||!v.length:x&&(!xe&&(P||C(v))||Z(v)&&!v||re&&!nr(o).isValid||ie&&!cr(o).isValid)){const{value:A,message:b}=de(x)?{value:!!x,message:x}:se(x);if(A&&(j[T]={type:K.required,message:b,ref:I,...X(K.required,b)},!s))return $(b),j}if(!P&&(!C(H)||!C(w))){let A,b;const F=se(w),O=se(H);if(!C(v)&&!isNaN(v)){const M=n.valueAsNumber||v&&+v;C(F.value)||(A=M>F.value),C(O.value)||(b=M<O.value)}else{const M=n.valueAsDate||new Date(v),B=ce=>new Date(new Date().toDateString()+" "+ce),Y=n.type=="time",ne=n.type=="week";q(F.value)&&v&&(A=Y?B(v)>B(F.value):ne?v>F.value:M>new Date(F.value)),q(O.value)&&v&&(b=Y?B(v)<B(O.value):ne?v<O.value:M<new Date(O.value))}if((A||b)&&(W(!!A,F.message,O.message,K.max,K.min),!s))return $(j[T].message),j}if((_||p)&&!P&&(q(v)||l&&Array.isArray(v))){const A=se(_),b=se(p),F=!C(A.value)&&v.length>+A.value,O=!C(b.value)&&v.length<+b.value;if((F||O)&&(W(F,A.message,b.message),!s))return $(j[T].message),j}if(m&&!P&&q(v)){const{value:A,message:b}=se(m);if(ye(A)&&!v.match(A)&&(j[T]={type:K.pattern,message:b,ref:n,...X(K.pattern,b)},!s))return $(b),j}if(G){if(Q(G)){const A=await G(v,a),b=Ze(A,I);if(b&&(j[T]={...b,...X(K.validate,b.message)},!s))return $(b.message),j}else if(k(G)){let A={};for(const b in G){if(!R(A)&&!s)break;const F=Ze(await G[b](v,a),I,b);F&&(A={...F,...X(b,F.message)},$(F.message),s&&(j[T]=A))}if(!R(A)&&(j[T]={ref:I,...A},!s))return j}}return $(!0),j};function Ir(e,a){const s=a.slice(0,-1).length;let t=0;for(;t<s;)e=D(e)?t++:e[a[t++]];return e}function Ur(e){for(const a in e)if(e.hasOwnProperty(a)&&!D(e[a]))return!1;return!0}function E(e,a){const s=Array.isArray(a)?a:Oe(a)?[a]:ir(a),t=s.length===1?e:Ir(e,s),l=s.length-1,n=s[l];return t&&delete t[n],l!==0&&(k(t)&&R(t)||Array.isArray(t)&&Ur(t))&&E(e,s.slice(0,-1)),e}function we(){let e=[];return{get observers(){return e},next:l=>{for(const n of e)n.next&&n.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(n=>n!==l)}}),unsubscribe:()=>{e=[]}}}var ge=e=>C(e)||!ar(e);function ee(e,a){if(ge(e)||ge(a))return e===a;if(ae(e)&&ae(a))return e.getTime()===a.getTime();const s=Object.keys(e),t=Object.keys(a);if(s.length!==t.length)return!1;for(const l of s){const n=e[l];if(!t.includes(l))return!1;if(l!=="ref"){const o=a[l];if(ae(n)&&ae(o)||k(n)&&k(o)||Array.isArray(n)&&Array.isArray(o)?!ee(n,o):n!==o)return!1}}return!0}var lr=e=>e.type==="select-multiple",Pr=e=>Me(e)||ue(e),Fe=e=>he(e)&&e.isConnected,ur=e=>{for(const a in e)if(Q(e[a]))return!0;return!1};function me(e,a={}){const s=Array.isArray(e);if(k(e)||s)for(const t in e)Array.isArray(e[t])||k(e[t])&&!ur(e[t])?(a[t]=Array.isArray(e[t])?[]:{},me(e[t],a[t])):C(e[t])||(a[t]=!0);return a}function or(e,a,s){const t=Array.isArray(e);if(k(e)||t)for(const l in e)Array.isArray(e[l])||k(e[l])&&!ur(e[l])?D(a)||ge(s[l])?s[l]=Array.isArray(e[l])?me(e[l],[]):{...me(e[l])}:or(e[l],C(a)?{}:a[l],s[l]):s[l]=!ee(e[l],a[l]);return s}var Ne=(e,a)=>or(e,a,me(a)),fr=(e,{valueAsNumber:a,valueAsDate:s,setValueAs:t})=>D(e)?e:a?e===""?NaN:e&&+e:s&&q(e)?new Date(e):t?t(e):e;function De(e){const a=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):a.disabled))return Te(a)?a.files:Me(a)?cr(e.refs).value:lr(a)?[...a.selectedOptions].map(({value:s})=>s):ue(a)?nr(e.refs).value:fr(D(a.value)?e.ref.value:a.value,e)}var Br=(e,a,s,t)=>{const l={};for(const n of e){const o=h(a,n);o&&V(l,n,o._f)}return{criteriaMode:s,names:[...e],fields:l,shouldUseNativeValidation:t}},le=e=>D(e)?e:ye(e)?e.source:k(e)?ye(e.value)?e.value.source:e.value:e,qr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function rr(e,a,s){const t=h(e,s);if(t||Oe(s))return{error:t,name:s};const l=s.split(".");for(;l.length;){const n=l.join("."),o=h(a,n),x=h(e,n);if(o&&!Array.isArray(o)&&s!==n)return{name:s};if(x&&x.type)return{name:n,error:x};l.pop()}return{name:s}}var Hr=(e,a,s,t,l)=>l.isOnAll?!1:!s&&l.isOnTouch?!(a||e):(s?t.isOnBlur:l.isOnBlur)?!e:(s?t.isOnChange:l.isOnChange)?e:!0,$r=(e,a)=>!oe(h(e,a)).length&&E(e,a);const Wr={mode:U.onSubmit,reValidateMode:U.onChange,shouldFocusError:!0};function Kr(e={},a){let s={...Wr,...e},t={submitCount:0,isDirty:!1,isLoading:Q(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},l={},n=k(s.defaultValues)||k(s.values)?z(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:z(n),x={action:!1,mount:!1,watch:!1},_={mount:new Set,unMount:new Set,array:new Set,watch:new Set},p,H=0;const w={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:we(),array:we(),state:we()},G=e.resetOptions&&e.resetOptions.keepDirtyValues,T=Ge(s.mode),_e=Ge(s.reValidateMode),fe=s.criteriaMode===U.all,ve=r=>i=>{clearTimeout(H),H=setTimeout(r,i)},v=async r=>{if(w.isValid||r){const i=s.resolver?R((await P()).errors):await W(l,!0);i!==t.isValid&&m.state.next({isValid:i})}},I=r=>w.isValidating&&m.state.next({isValidating:r}),$=(r,i=[],c,y,f=!0,u=!0)=>{if(y&&c){if(x.action=!0,u&&Array.isArray(h(l,r))){const g=c(h(l,r),y.argA,y.argB);f&&V(l,r,g)}if(u&&Array.isArray(h(t.errors,r))){const g=c(h(t.errors,r),y.argA,y.argB);f&&V(t.errors,r,g),$r(t.errors,r)}if(w.touchedFields&&u&&Array.isArray(h(t.touchedFields,r))){const g=c(h(t.touchedFields,r),y.argA,y.argB);f&&V(t.touchedFields,r,g)}w.dirtyFields&&(t.dirtyFields=Ne(n,o)),m.state.next({name:r,isDirty:b(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else V(o,r,i)},j=(r,i)=>{V(t.errors,r,i),m.state.next({errors:t.errors})},ie=(r,i,c,y)=>{const f=h(l,r);if(f){const u=h(o,r,D(c)?h(n,r):c);D(u)||y&&y.defaultChecked||i?V(o,r,i?u:De(f._f)):M(r,u),x.mount&&v()}},re=(r,i,c,y,f)=>{let u=!1,g=!1;const S={name:r};if(!c||y){w.isDirty&&(g=t.isDirty,t.isDirty=S.isDirty=b(),u=g!==S.isDirty);const N=ee(h(n,r),i);g=h(t.dirtyFields,r),N?E(t.dirtyFields,r):V(t.dirtyFields,r,!0),S.dirtyFields=t.dirtyFields,u=u||w.dirtyFields&&g!==!N}if(c){const N=h(t.touchedFields,r);N||(V(t.touchedFields,r,c),S.touchedFields=t.touchedFields,u=u||w.touchedFields&&N!==c)}return u&&f&&m.state.next(S),u?S:{}},xe=(r,i,c,y)=>{const f=h(t.errors,r),u=w.isValid&&Z(i)&&t.isValid!==i;if(e.delayError&&c?(p=ve(()=>j(r,c)),p(e.delayError)):(clearTimeout(H),p=null,c?V(t.errors,r,c):E(t.errors,r)),(c?!ee(f,c):f)||!R(y)||u){const g={...y,...u&&Z(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...g},m.state.next(g)}I(!1)},P=async r=>s.resolver(o,s.context,Br(r||_.mount,l,s.criteriaMode,s.shouldUseNativeValidation)),X=async r=>{const{errors:i}=await P(r);if(r)for(const c of r){const y=h(i,c);y?V(t.errors,c,y):E(t.errors,c)}else t.errors=i;return i},W=async(r,i,c={valid:!0})=>{for(const y in r){const f=r[y];if(f){const{_f:u,...g}=f;if(u){const S=_.array.has(u.name),N=await er(f,o,fe,s.shouldUseNativeValidation&&!i,S);if(N[u.name]&&(c.valid=!1,i))break;!i&&(h(N,u.name)?S?Rr(t.errors,N,u.name):V(t.errors,u.name,N[u.name]):E(t.errors,u.name))}g&&await W(g,i,c)}}return c.valid},A=()=>{for(const r of _.unMount){const i=h(l,r);i&&(i._f.refs?i._f.refs.every(c=>!Fe(c)):!Fe(i._f.ref))&&be(r)}_.unMount=new Set},b=(r,i)=>(r&&i&&V(o,r,i),!ee(Re(),n)),F=(r,i,c)=>Tr(r,_,{...x.mount?o:D(i)?n:q(r)?{[r]:i}:i},c,i),O=r=>oe(h(x.mount?o:n,r,e.shouldUnregister?h(n,r,[]):[])),M=(r,i,c={})=>{const y=h(l,r);let f=i;if(y){const u=y._f;u&&(!u.disabled&&V(o,r,fr(i,u)),f=he(u.ref)&&C(i)?"":i,lr(u.ref)?[...u.ref.options].forEach(g=>g.selected=f.includes(g.value)):u.refs?ue(u.ref)?u.refs.length>1?u.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(f)?!!f.find(S=>S===g.value):f===g.value)):u.refs[0]&&(u.refs[0].checked=!!f):u.refs.forEach(g=>g.checked=g.value===f):Te(u.ref)?u.ref.value="":(u.ref.value=f,u.ref.type||m.values.next({name:r,values:{...o}})))}(c.shouldDirty||c.shouldTouch)&&re(r,f,c.shouldTouch,c.shouldDirty,!0),c.shouldValidate&&ce(r)},B=(r,i,c)=>{for(const y in i){const f=i[y],u=`${r}.${y}`,g=h(l,u);(_.array.has(r)||!ge(f)||g&&!g._f)&&!ae(f)?B(u,f,c):M(u,f,c)}},Y=(r,i,c={})=>{const y=h(l,r),f=_.array.has(r),u=z(i);V(o,r,u),f?(m.array.next({name:r,values:{...o}}),(w.isDirty||w.dirtyFields)&&c.shouldDirty&&m.state.next({name:r,dirtyFields:Ne(n,o),isDirty:b(r,u)})):y&&!y._f&&!C(u)?B(r,u,c):M(r,u,c),Je(r,_)&&m.state.next({...t}),m.values.next({name:r,values:{...o}}),!x.mount&&a()},ne=async r=>{const i=r.target;let c=i.name,y=!0;const f=h(l,c),u=()=>i.type?De(f._f):Dr(r);if(f){let g,S;const N=u(),te=r.type===ze.BLUR||r.type===ze.FOCUS_OUT,gr=!qr(f._f)&&!s.resolver&&!h(t.errors,c)&&!f._f.deps||Hr(te,h(t.touchedFields,c),t.isSubmitted,_e,T),Ve=Je(c,_,te);V(o,c,N),te?(f._f.onBlur&&f._f.onBlur(r),p&&p(0)):f._f.onChange&&f._f.onChange(r);const pe=re(c,N,te,!1),mr=!R(pe)||Ve;if(!te&&m.values.next({name:c,type:r.type,values:{...o}}),gr)return w.isValid&&v(),mr&&m.state.next({name:c,...Ve?{}:pe});if(!te&&Ve&&m.state.next({...t}),I(!0),s.resolver){const{errors:We}=await P([c]),_r=rr(t.errors,l,c),Ke=rr(We,l,_r.name||c);g=Ke.error,c=Ke.name,S=R(We)}else g=(await er(f,o,fe,s.shouldUseNativeValidation))[c],y=Number.isNaN(N)||N===h(o,c,N),y&&(g?S=!1:w.isValid&&(S=await W(l,!0)));y&&(f._f.deps&&ce(f._f.deps),xe(c,S,g,pe))}},ce=async(r,i={})=>{let c,y;const f=Se(r);if(I(!0),s.resolver){const u=await X(D(r)?r:f);c=R(u),y=r?!f.some(g=>h(u,g)):c}else r?(y=(await Promise.all(f.map(async u=>{const g=h(l,u);return await W(g&&g._f?{[u]:g}:g)}))).every(Boolean),!(!y&&!t.isValid)&&v()):y=c=await W(l);return m.state.next({...!q(r)||w.isValid&&c!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:c}:{},errors:t.errors,isValidating:!1}),i.shouldFocus&&!y&&ke(l,u=>u&&h(t.errors,u),r?f:_.mount),y},Re=r=>{const i={...n,...x.mount?o:{}};return D(r)?i:q(r)?h(i,r):r.map(c=>h(i,c))},Ie=(r,i)=>({invalid:!!h((i||t).errors,r),isDirty:!!h((i||t).dirtyFields,r),isTouched:!!h((i||t).touchedFields,r),error:h((i||t).errors,r)}),dr=r=>{r&&Se(r).forEach(i=>E(t.errors,i)),m.state.next({errors:r?t.errors:{}})},Ue=(r,i,c)=>{const y=(h(l,r,{_f:{}})._f||{}).ref;V(t.errors,r,{...i,ref:y}),m.state.next({name:r,errors:t.errors,isValid:!1}),c&&c.shouldFocus&&y&&y.focus&&y.focus()},hr=(r,i)=>Q(r)?m.values.subscribe({next:c=>r(F(void 0,i),c)}):F(r,i,!0),be=(r,i={})=>{for(const c of r?Se(r):_.mount)_.mount.delete(c),_.array.delete(c),i.keepValue||(E(l,c),E(o,c)),!i.keepError&&E(t.errors,c),!i.keepDirty&&E(t.dirtyFields,c),!i.keepTouched&&E(t.touchedFields,c),!s.shouldUnregister&&!i.keepDefaultValue&&E(n,c);m.values.next({values:{...o}}),m.state.next({...t,...i.keepDirty?{isDirty:b()}:{}}),!i.keepIsValid&&v()},Pe=({disabled:r,name:i,field:c,fields:y})=>{if(Z(r)){const f=r?void 0:h(o,i,De(c?c._f:h(y,i)._f));V(o,i,f),re(i,f,!1,!1,!0)}},Ae=(r,i={})=>{let c=h(l,r);const y=Z(i.disabled);return V(l,r,{...c||{},_f:{...c&&c._f?c._f:{ref:{name:r}},name:r,mount:!0,...i}}),_.mount.add(r),c?Pe({field:c,disabled:i.disabled,name:r}):ie(r,!0,i.value),{...y?{disabled:i.disabled}:{},...s.progressive?{required:!!i.required,min:le(i.min),max:le(i.max),minLength:le(i.minLength),maxLength:le(i.maxLength),pattern:le(i.pattern)}:{},name:r,onChange:ne,onBlur:ne,ref:f=>{if(f){Ae(r,i),c=h(l,r);const u=D(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,g=Pr(u),S=c._f.refs||[];if(g?S.find(N=>N===u):u===c._f.ref)return;V(l,r,{_f:{...c._f,...g?{refs:[...S.filter(Fe),u,...Array.isArray(h(n,r))?[{}]:[]],ref:{type:u.type,name:r}}:{ref:u}}}),ie(r,!1,void 0,u)}else c=h(l,r,{}),c._f&&(c._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(jr(_.array,r)&&x.action)&&_.unMount.add(r)}}},Be=()=>s.shouldFocusError&&ke(l,r=>r&&h(t.errors,r),_.mount),qe=(r,i)=>async c=>{c&&(c.preventDefault&&c.preventDefault(),c.persist&&c.persist());let y=z(o);if(m.state.next({isSubmitting:!0}),s.resolver){const{errors:f,values:u}=await P();t.errors=f,y=u}else await W(l);E(t.errors,"root"),R(t.errors)?(m.state.next({errors:{}}),await r(y,c)):(i&&await i({...t.errors},c),Be(),setTimeout(Be)),m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:R(t.errors),submitCount:t.submitCount+1,errors:t.errors})},yr=(r,i={})=>{h(l,r)&&(D(i.defaultValue)?Y(r,h(n,r)):(Y(r,i.defaultValue),V(n,r,i.defaultValue)),i.keepTouched||E(t.touchedFields,r),i.keepDirty||(E(t.dirtyFields,r),t.isDirty=i.defaultValue?b(r,h(n,r)):b()),i.keepError||(E(t.errors,r),w.isValid&&v()),m.state.next({...t}))},He=(r,i={})=>{const c=r?z(r):n,y=z(c),f=r&&!R(r)?y:n;if(i.keepDefaultValues||(n=c),!i.keepValues){if(i.keepDirtyValues||G)for(const u of _.mount)h(t.dirtyFields,u)?V(f,u,h(o,u)):Y(u,h(f,u));else{if(Le&&D(r))for(const u of _.mount){const g=h(l,u);if(g&&g._f){const S=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;if(he(S)){const N=S.closest("form");if(N){N.reset();break}}}}l={}}o=e.shouldUnregister?i.keepDefaultValues?z(n):{}:z(f),m.array.next({values:{...f}}),m.values.next({values:{...f}})}_={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!x.mount&&a(),x.mount=!w.isValid||!!i.keepIsValid,x.watch=!!e.shouldUnregister,m.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!ee(r,n)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:i.keepDirtyValues?t.dirtyFields:i.keepDefaultValues&&r?Ne(n,r):{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},$e=(r,i)=>He(Q(r)?r(o):r,i);return{control:{register:Ae,unregister:be,getFieldState:Ie,handleSubmit:qe,setError:Ue,_executeSchema:P,_getWatch:F,_getDirty:b,_updateValid:v,_removeUnmounted:A,_updateFieldArray:$,_updateDisabledField:Pe,_getFieldArray:O,_reset:He,_resetDefaultValues:()=>Q(s.defaultValues)&&s.defaultValues().then(r=>{$e(r,s.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_subjects:m,_proxyFormState:w,get _fields(){return l},get _formValues(){return o},get _state(){return x},set _state(r){x=r},get _defaultValues(){return n},get _names(){return _},set _names(r){_=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:ce,register:Ae,handleSubmit:qe,watch:hr,setValue:Y,getValues:Re,reset:$e,resetField:yr,clearErrors:dr,unregister:be,setError:Ue,setFocus:(r,i={})=>{const c=h(l,r),y=c&&c._f;if(y){const f=y.refs?y.refs[0]:y.ref;f.focus&&(f.focus(),i.shouldSelect&&f.select())}},getFieldState:Ie}}function zr(e={}){const a=J.useRef(),s=J.useRef(),[t,l]=J.useState({isDirty:!1,isValidating:!1,isLoading:Q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Q(e.defaultValues)?void 0:e.defaultValues});a.current||(a.current={...Kr(e,()=>l(o=>({...o}))),formState:t});const n=a.current.control;return n._options=e,Or({subject:n._subjects.state,next:o=>{Lr(o,n._proxyFormState,n._updateFormState,!0)&&l({...n._formState})}}),J.useEffect(()=>{e.values&&!ee(e.values,s.current)?(n._reset(e.values,n._options.resetOptions),s.current=e.values):n._resetDefaultValues()},[e.values,n]),J.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),a.current.formState=Cr(t,n),a.current}function Gr(){var H;const{register:e,handleSubmit:a,formState:s}=zr(),[t,l]=L.useState(null),[n,o]=L.useState("pending"),[x,_]=L.useState(null),p=({name:w})=>{_(null),o("loading"),Ce.getSingleCharacterByName({name:w}).then(m=>{m.length?(l(m[0]),o("success")):(l(null),o("absence"))}).catch(m=>{_(m),o("failure")})};return L.useEffect(()=>{s.errors.name?o("require"):o("pending")},[(H=s.errors.name)==null?void 0:H.message]),d.jsxs("div",{className:"character-search",children:[d.jsxs("div",{className:"character-search__form",children:[d.jsx("h3",{className:"character-search__form-title",children:"Or find a character by name:"}),d.jsxs("form",{className:"character-search__form-body",onSubmit:a(p),children:[d.jsx("input",{type:"text",className:"character-search__form-input",placeholder:"Enter name",defaultValue:"",...e("name",{required:!0})}),d.jsx("button",{className:"button button_red character-search__form-button",type:"submit",children:"FIND"})]})]}),d.jsxs("div",{className:"character-search__main",children:[n==="loading"&&d.jsx(je,{className:"character-search__main-spinner"}),n==="failure"&&d.jsx(Ee,{className:"character-search__main-error",info:x.message}),n==="require"&&d.jsx("p",{className:"character-search__main-warning",children:"Please, enter a character name!"}),n==="absence"&&d.jsx("p",{className:"character-search__main-text",children:"The character was not found. Check the name and try again."}),n==="success"&&d.jsxs("div",{className:"character-search__main-result",children:[d.jsx("p",{className:"character-search__main-reuslt-text",children:`There is! Visit ${t.name} page?`}),d.jsx(vr,{className:"button button_black character-search__main-button",to:`/characters/${t.id}`,children:"TO PAGE"})]})]})]})}function Jr(){const[e,a]=L.useState(null),s=L.useCallback(t=>{a(t)},[]);return d.jsx("section",{className:"section all-caharacters",children:d.jsxs("div",{className:"container all-caharacters__container",children:[d.jsx("h2",{className:"title all-caharacters__title",children:"All characters"}),d.jsxs("div",{className:"all-caharacters__body",children:[d.jsx("div",{className:"all-caharacters__list",children:d.jsx(Nr,{onSelect:s})}),d.jsxs("div",{className:"all-caharacters__sidebar",children:[d.jsx(Sr,{selected:e}),d.jsx(Gr,{})]})]})]})})}function st(){return d.jsxs(d.Fragment,{children:[d.jsxs(xr,{children:[d.jsx("meta",{name:"description",content:"Marvel data base. Page with all characters"}),d.jsx("title",{children:"All Characters â€“ Marvel Data Base"})]}),d.jsx(br,{title:"Marvel characters"}),d.jsx(Jr,{})]})}export{st as default};
