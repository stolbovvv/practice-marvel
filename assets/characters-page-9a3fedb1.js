import{j as e,r as c,s as x,S as j}from"./index-ea8dcb4c.js";import{g as C,E as N,a as g}from"./error-message-a5fd43f5.js";import{S}from"./site-hero-4def3660.js";function I({data:a}){const s=C(a.image),t=[];for(let r=0;r<a.comics.length&&!(r>=5);r++)t.push(e.jsx("li",{className:"character-info__list-item",children:a.comics[r].name},r+1));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"character-info__head",children:[e.jsx("img",{className:"character-info__head-image",src:a.image,alt:`${a.name} image`,style:s}),e.jsxs("div",{className:"character-info__head-body",children:[e.jsx("h3",{className:"character-info__head-name",children:a.name}),e.jsx("a",{className:"button button_red",href:a.home,target:"_blank",rel:"noopener noreferrer",children:"Home page"}),e.jsx("a",{className:"button button_black",href:a.wiki,target:"_blank",rel:"noopener noreferrer",children:"Wiki"})]})]}),e.jsx("p",{className:"character-info__text",children:a.descr||"Character description not found..."}),e.jsxs("div",{className:"character-info__list",children:[e.jsx("h4",{className:"character-info__list-title",children:"Comics:"}),a.comics.length>0?e.jsx("ul",{className:"character-info__list-body",children:t}):e.jsx("p",{className:"character-info__list-text",children:"Not found..."})]})]})}function E({text:a}){return e.jsx("div",{className:"character-info__idle",children:e.jsx("p",{className:"character-info__idle-text",children:a})})}function v({className:a,selected:s}){const[t,r]=c.useState(null),[l,i]=c.useState(!1),[n,h]=c.useState(null),d=()=>{s&&(h(null),i(!0),g.getSingleCharacter({id:s}).then(o=>{i(!1),r(o[0])}).catch(o=>{i(!1),h(o)}))};return c.useEffect(()=>{d()},[s]),e.jsxs("div",{className:x("character-info",a),children:[n?e.jsx(N,{className:"character-info__error"}):null,l?e.jsx(j,{className:"character-info__spinner"}):null,!l&&!n&&t?e.jsx(I,{data:t}):null,!l&&!n&&!t?e.jsx(E,{text:"Choose a character"}):null]})}const y=c.memo(function({data:s,onSelect:t}){const r=C(s.image),l=()=>{t(s.id)},i=n=>{n.code&&n.code==="Space"&&n.code==="Enter"&&(n.preventDefault(),t(s.id))};return e.jsxs("li",{className:"character-list__item",tabIndex:0,onClick:l,onKeyDown:i,children:[e.jsx("img",{className:"character-list__item-image",src:s.image,alt:`${s.name} image`,style:r}),e.jsx("div",{className:"character-list__item-body",children:e.jsx("h3",{className:"character-list__item-name",children:s.name})})]})});function L({data:a,onSelect:s}){return e.jsx("ul",{className:"character-list__body",children:a.map(t=>e.jsx(y,{data:t,onSelect:s},t.id))})}function k({className:a,onSelect:s}){const[r,l]=c.useState(!1),[i,n]=c.useState([]),[h,d]=c.useState(0),[o,_]=c.useState(null),[p,b]=c.useState(!1),f=()=>{_(null),l(!0),g.getAllCharacters({limit:9,offset:h}).then(m=>{l(!1),n(u=>[...u,...m]),d(u=>u+9),b(m.length<9)}).catch(m=>{l(!1),_(m)})};return c.useEffect(()=>{f()},[]),e.jsxs("div",{className:x("character-list",a),children:[o?e.jsx(N,{}):e.jsx(L,{data:i,onSelect:s}),e.jsx("button",{className:"button button_red character-list__button",style:{display:p?"none":"block"},disabled:r,onClick:f,children:r?e.jsx(j,{}):"Load more"})]})}function A(){const[a,s]=c.useState(null),t=c.useCallback(r=>{s(r)},[]);return e.jsx("section",{className:"section all-caharacters",children:e.jsxs("div",{className:"container all-caharacters__container",children:[e.jsx("h2",{className:"title all-caharacters__title",children:"All characters"}),e.jsxs("div",{className:"all-caharacters__body",children:[e.jsx(k,{className:"all-caharacters__list",onSelect:t}),e.jsx(v,{className:"all-caharacters__info",selected:a})]})]})})}function H(){return e.jsxs(e.Fragment,{children:[e.jsx(S,{title:"Marvel characters"}),e.jsx(A,{})]})}export{H as default};
