import{g as sr,j as y,r as T,s as ir,S as je,R as B,L as br}from"./index-ff74739b.js";import{H as Vr}from"./Helmet-af051538.js";import{E as Ce,a as Le,S as Ar}from"./site-hero-7878edea.js";import{u as Fr}from"./useList-02553ca4.js";function Sr({data:e}){const s=sr(e.image),r=[];for(let n=0;n<e.comics.length&&!(n>=5);n++)r.push(y.jsx("li",{className:"character-info__list-item",children:e.comics[n].name},n+1));return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"character-info__head",children:[y.jsx("img",{className:"character-info__head-image",src:e.image,alt:`${e.name} image`,style:s}),y.jsxs("div",{className:"character-info__head-body",children:[y.jsx("h3",{className:"character-info__head-name",children:e.name}),y.jsx("a",{className:"button button_red",href:e.home,target:"_blank",rel:"noopener noreferrer",children:"Home page"}),y.jsx("a",{className:"button button_black",href:e.wiki,target:"_blank",rel:"noopener noreferrer",children:"Wiki"})]})]}),y.jsx("p",{className:"character-info__text",children:e.descr||"Character description not found..."}),y.jsxs("div",{className:"character-info__list",children:[y.jsx("h4",{className:"character-info__list-title",children:"Comics:"}),e.comics.length>0?y.jsx("ul",{className:"character-info__list-body",children:r}):y.jsx("p",{className:"character-info__list-text",children:"Not found..."})]})]})}function wr({text:e}){return y.jsx("div",{className:"character-info__idle",children:y.jsx("h3",{className:"character-info__idle-text",children:e})})}function Dr({className:e,selected:s}){const[r,n]=T.useState(null),[c,a]=T.useState("pending"),[f,_]=T.useState(null),D=()=>{s&&(_(null),a("loading"),Le.getSingleCharacter({id:s}).then(w=>{n(w[0]),a("success")}).catch(w=>{_(w),a("failure")}))};return T.useEffect(()=>{D()},[s]),y.jsxs("div",{className:ir("character-info",e),children:[c==="pending"&&y.jsx(wr,{text:"Choose a character"}),c==="loading"&&y.jsx(je,{className:"character-info__spinner"}),c==="success"&&y.jsx(Sr,{data:r}),c==="failure"&&y.jsx(Ce,{className:"character-info__error",info:f.message})]})}const Nr=T.memo(function({data:s,onSelect:r}){const n=sr(s.image),c=()=>{r(s.id)},a=f=>{f.code&&f.code==="Space"&&f.code==="Enter"&&(f.preventDefault(),r(s.id))};return y.jsxs("li",{className:"character-list__item",tabIndex:0,onClick:c,onKeyDown:a,children:[y.jsx("img",{className:"character-list__item-image",src:s.image,alt:`${s.name} image`,style:n}),y.jsx("div",{className:"character-list__item-body",children:y.jsx("h3",{className:"character-list__item-name",children:s.name})})]})});function kr({data:e,onSelect:s}){return y.jsx("ul",{className:"character-list__body",children:e.map(r=>y.jsx(Nr,{data:r,onSelect:s},r.id))})}function Er({className:e,onSelect:s}){const[r,n]=Fr({initLimit:9}),[c,a]=T.useState("pending"),[f,_]=T.useState(null),D=()=>{_(null),a("loading"),Le.getAllCharacters({limit:r.limit,offset:r.offset}).then(w=>{n({data:w}),a("success")}).catch(w=>{_(w),a("failure")})};return T.useEffect(()=>{D()},[]),T.useEffect(()=>{r.ended&&a("ending")},[r.ended]),y.jsxs("div",{className:ir("character-list",e),children:[c==="failure"&&y.jsx(Ce,{info:f.message}),c!=="failure"&&y.jsx(kr,{data:r.list,onSelect:s}),c==="loading"&&y.jsx(je,{size:"2.625rem",style:{marginInline:"auto"}}),c!=="loading"&&c!=="ending"&&y.jsx("button",{className:"button button_red character-list__button",onClick:D,children:"Load more"})]})}var de=e=>e.type==="checkbox",ne=e=>e instanceof Date,L=e=>e==null;const ar=e=>typeof e=="object";var p=e=>!L(e)&&!Array.isArray(e)&&ar(e)&&!ne(e),pr=e=>p(e)&&e.target?de(e.target)?e.target.checked:e.target.value:e,jr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Cr=(e,s)=>e.has(jr(s)),Lr=e=>{const s=e.constructor&&e.constructor.prototype;return p(s)&&s.hasOwnProperty("isPrototypeOf")},Te=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function P(e){let s;const r=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(Te&&(e instanceof Blob||e instanceof FileList))&&(r||p(e)))if(s=r?[]:{},!r&&!Lr(e))s=e;else for(const n in e)e.hasOwnProperty(n)&&(s[n]=P(e[n]));else return e;return s}var he=e=>Array.isArray(e)?e.filter(Boolean):[],S=e=>e===void 0,h=(e,s,r)=>{if(!s||!p(e))return r;const n=he(s.split(/[,[\].]+?/)).reduce((c,a)=>L(c)?c:c[a],e);return S(n)||n===e?S(e[s])?r:e[s]:n},J=e=>typeof e=="boolean";const Ge={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},H={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},G={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};B.createContext(null);var Tr=(e,s,r,n=!0)=>{const c={defaultValues:s._defaultValues};for(const a in e)Object.defineProperty(c,a,{get:()=>{const f=a;return s._proxyFormState[f]!==H.all&&(s._proxyFormState[f]=!n||H.all),r&&(r[f]=!0),e[f]}});return c},I=e=>p(e)&&!Object.keys(e).length,Or=(e,s,r,n)=>{r(e);const{name:c,...a}=e;return I(a)||Object.keys(a).length>=Object.keys(s).length||Object.keys(a).find(f=>s[f]===(!n||H.all))},Ne=e=>Array.isArray(e)?e:[e];function Rr(e){const s=B.useRef(e);s.current=e,B.useEffect(()=>{const r=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var W=e=>typeof e=="string",Ir=(e,s,r,n,c)=>W(e)?(n&&s.watch.add(e),h(r,e,c)):Array.isArray(e)?e.map(a=>(n&&s.watch.add(a),h(r,a))):(n&&(s.watchAll=!0),r),Oe=e=>/^\w*$/.test(e),nr=e=>he(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,s,r)=>{let n=-1;const c=Oe(s)?[s]:nr(s),a=c.length,f=a-1;for(;++n<a;){const _=c[n];let D=r;if(n!==f){const w=e[_];D=p(w)||Array.isArray(w)?w:isNaN(+c[n+1])?{}:[]}e[_]=D,e=e[_]}return e},Mr=(e,s,r,n,c)=>s?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:c||!0}}:{},Je=e=>({isOnSubmit:!e||e===H.onSubmit,isOnBlur:e===H.onBlur,isOnChange:e===H.onChange,isOnAll:e===H.all,isOnTouch:e===H.onTouched}),Qe=(e,s,r)=>!r&&(s.watchAll||s.watch.has(e)||[...s.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const fe=(e,s,r,n)=>{for(const c of r||Object.keys(e)){const a=h(e,c);if(a){const{_f:f,..._}=a;if(f){if(f.refs&&f.refs[0]&&s(f.refs[0],c)&&!n)break;if(f.ref&&s(f.ref,f.name)&&!n)break;fe(_,s)}else p(_)&&fe(_,s)}}};var Ur=(e,s,r)=>{const n=he(h(e,r));return A(n,"root",s[r]),A(e,r,n),e},Re=e=>e.type==="file",Z=e=>typeof e=="function",ve=e=>{if(!Te)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},me=e=>W(e),Ie=e=>e.type==="radio",xe=e=>e instanceof RegExp;const Xe={value:!1,isValid:!1},Ye={value:!0,isValid:!0};var lr=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!S(e[0].attributes.value)?S(e[0].value)||e[0].value===""?Ye:{value:e[0].value,isValid:!0}:Ye:Xe}return Xe};const Ze={isValid:!1,value:null};var cr=e=>Array.isArray(e)?e.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,Ze):Ze;function er(e,s,r="validate"){if(me(e)||Array.isArray(e)&&e.every(me)||J(e)&&!e)return{type:r,message:me(e)?e:"",ref:s}}var ae=e=>p(e)&&!xe(e)?e:{value:e,message:""},rr=async(e,s,r,n,c)=>{const{ref:a,refs:f,required:_,maxLength:D,minLength:w,min:F,max:m,pattern:$,validate:Q,name:O,valueAsNumber:Ae,mount:X,disabled:Y}=e._f,x=h(s,O);if(!X||Y)return{};const K=f?f[0]:a,z=v=>{n&&K.reportValidity&&(K.setCustomValidity(J(v)?"":v||""),K.reportValidity())},N={},te=Ie(a),ye=de(a),ee=te||ye,se=(Ae||Re(a))&&S(a.value)&&S(x)||ve(a)&&a.value===""||x===""||Array.isArray(x)&&!x.length,M=Mr.bind(null,O,r,N),ge=(v,b,k,C=G.maxLength,q=G.minLength)=>{const U=v?b:k;N[O]={type:v?C:q,message:U,ref:a,...M(v?C:q,U)}};if(c?!Array.isArray(x)||!x.length:_&&(!ee&&(se||L(x))||J(x)&&!x||ye&&!lr(f).isValid||te&&!cr(f).isValid)){const{value:v,message:b}=me(_)?{value:!!_,message:_}:ae(_);if(v&&(N[O]={type:G.required,message:b,ref:K,...M(G.required,b)},!r))return z(b),N}if(!se&&(!L(F)||!L(m))){let v,b;const k=ae(m),C=ae(F);if(!L(x)&&!isNaN(x)){const q=a.valueAsNumber||x&&+x;L(k.value)||(v=q>k.value),L(C.value)||(b=q<C.value)}else{const q=a.valueAsDate||new Date(x),U=ue=>new Date(new Date().toDateString()+" "+ue),le=a.type=="time",ce=a.type=="week";W(k.value)&&x&&(v=le?U(x)>U(k.value):ce?x>k.value:q>new Date(k.value)),W(C.value)&&x&&(b=le?U(x)<U(C.value):ce?x<C.value:q<new Date(C.value))}if((v||b)&&(ge(!!v,k.message,C.message,G.max,G.min),!r))return z(N[O].message),N}if((D||w)&&!se&&(W(x)||c&&Array.isArray(x))){const v=ae(D),b=ae(w),k=!L(v.value)&&x.length>+v.value,C=!L(b.value)&&x.length<+b.value;if((k||C)&&(ge(k,v.message,b.message),!r))return z(N[O].message),N}if($&&!se&&W(x)){const{value:v,message:b}=ae($);if(xe(v)&&!x.match(v)&&(N[O]={type:G.pattern,message:b,ref:a,...M(G.pattern,b)},!r))return z(b),N}if(Q){if(Z(Q)){const v=await Q(x,s),b=er(v,K);if(b&&(N[O]={...b,...M(G.validate,b.message)},!r))return z(b.message),N}else if(p(Q)){let v={};for(const b in Q){if(!I(v)&&!r)break;const k=er(await Q[b](x,s),K,b);k&&(v={...k,...M(b,k.message)},z(k.message),r&&(N[O]=v))}if(!I(v)&&(N[O]={ref:K,...v},!r))return N}}return z(!0),N};function Pr(e,s){const r=s.slice(0,-1).length;let n=0;for(;n<r;)e=S(e)?n++:e[s[n++]];return e}function Br(e){for(const s in e)if(e.hasOwnProperty(s)&&!S(e[s]))return!1;return!0}function E(e,s){const r=Array.isArray(s)?s:Oe(s)?[s]:nr(s),n=r.length===1?e:Pr(e,r),c=r.length-1,a=r[c];return n&&delete n[a],c!==0&&(p(n)&&I(n)||Array.isArray(n)&&Br(n))&&E(e,r.slice(0,-1)),e}var ke=()=>{let e=[];return{get observers(){return e},next:c=>{for(const a of e)a.next&&a.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(a=>a!==c)}}),unsubscribe:()=>{e=[]}}},be=e=>L(e)||!ar(e);function re(e,s){if(be(e)||be(s))return e===s;if(ne(e)&&ne(s))return e.getTime()===s.getTime();const r=Object.keys(e),n=Object.keys(s);if(r.length!==n.length)return!1;for(const c of r){const a=e[c];if(!n.includes(c))return!1;if(c!=="ref"){const f=s[c];if(ne(a)&&ne(f)||p(a)&&p(f)||Array.isArray(a)&&Array.isArray(f)?!re(a,f):a!==f)return!1}}return!0}var ur=e=>e.type==="select-multiple",qr=e=>Ie(e)||de(e),Ee=e=>ve(e)&&e.isConnected,or=e=>{for(const s in e)if(Z(e[s]))return!0;return!1};function Ve(e,s={}){const r=Array.isArray(e);if(p(e)||r)for(const n in e)Array.isArray(e[n])||p(e[n])&&!or(e[n])?(s[n]=Array.isArray(e[n])?[]:{},Ve(e[n],s[n])):L(e[n])||(s[n]=!0);return s}function fr(e,s,r){const n=Array.isArray(e);if(p(e)||n)for(const c in e)Array.isArray(e[c])||p(e[c])&&!or(e[c])?S(s)||be(r[c])?r[c]=Array.isArray(e[c])?Ve(e[c],[]):{...Ve(e[c])}:fr(e[c],L(s)?{}:s[c],r[c]):r[c]=!re(e[c],s[c]);return r}var _e=(e,s)=>fr(e,s,Ve(s)),dr=(e,{valueAsNumber:s,valueAsDate:r,setValueAs:n})=>S(e)?e:s?e===""?NaN:e&&+e:r&&W(e)?new Date(e):n?n(e):e;function pe(e){const s=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):s.disabled))return Re(s)?s.files:Ie(s)?cr(e.refs).value:ur(s)?[...s.selectedOptions].map(({value:r})=>r):de(s)?lr(e.refs).value:dr(S(s.value)?e.ref.value:s.value,e)}var Hr=(e,s,r,n)=>{const c={};for(const a of e){const f=h(s,a);f&&A(c,a,f._f)}return{criteriaMode:r,names:[...e],fields:c,shouldUseNativeValidation:n}},oe=e=>S(e)?e:xe(e)?e.source:p(e)?xe(e.value)?e.value.source:e.value:e,Wr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function tr(e,s,r){const n=h(e,r);if(n||Oe(r))return{error:n,name:r};const c=r.split(".");for(;c.length;){const a=c.join("."),f=h(s,a),_=h(e,a);if(f&&!Array.isArray(f)&&r!==a)return{name:r};if(_&&_.type)return{name:a,error:_};c.pop()}return{name:r}}var $r=(e,s,r,n,c)=>c.isOnAll?!1:!r&&c.isOnTouch?!(s||e):(r?n.isOnBlur:c.isOnBlur)?!e:(r?n.isOnChange:c.isOnChange)?e:!0,Kr=(e,s)=>!he(h(e,s)).length&&E(e,s);const zr={mode:H.onSubmit,reValidateMode:H.onChange,shouldFocusError:!0};function Gr(e={}){let s={...zr,...e},r={submitCount:0,isDirty:!1,isLoading:Z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},c=p(s.defaultValues)||p(s.values)?P(s.defaultValues||s.values)||{}:{},a=s.shouldUnregister?{}:P(c),f={action:!1,mount:!1,watch:!1},_={mount:new Set,unMount:new Set,array:new Set,watch:new Set},D,w=0;const F={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={values:ke(),array:ke(),state:ke()},$=Je(s.mode),Q=Je(s.reValidateMode),O=s.criteriaMode===H.all,Ae=t=>i=>{clearTimeout(w),w=setTimeout(t,i)},X=async t=>{if(F.isValid||t){const i=s.resolver?I((await ee()).errors):await M(n,!0);i!==r.isValid&&m.state.next({isValid:i})}},Y=(t,i)=>{(F.isValidating||F.validatingFields)&&((t||Array.from(_.mount)).forEach(l=>{l&&(i?A(r.validatingFields,l,i):E(r.validatingFields,l))}),m.state.next({validatingFields:r.validatingFields,isValidating:!I(r.validatingFields)}))},x=(t,i=[],l,d,o=!0,u=!0)=>{if(d&&l){if(f.action=!0,u&&Array.isArray(h(n,t))){const g=l(h(n,t),d.argA,d.argB);o&&A(n,t,g)}if(u&&Array.isArray(h(r.errors,t))){const g=l(h(r.errors,t),d.argA,d.argB);o&&A(r.errors,t,g),Kr(r.errors,t)}if(F.touchedFields&&u&&Array.isArray(h(r.touchedFields,t))){const g=l(h(r.touchedFields,t),d.argA,d.argB);o&&A(r.touchedFields,t,g)}F.dirtyFields&&(r.dirtyFields=_e(c,a)),m.state.next({name:t,isDirty:v(t,i),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else A(a,t,i)},K=(t,i)=>{A(r.errors,t,i),m.state.next({errors:r.errors})},z=t=>{r.errors=t,m.state.next({errors:r.errors,isValid:!1})},N=(t,i,l,d)=>{const o=h(n,t);if(o){const u=h(a,t,S(l)?h(c,t):l);S(u)||d&&d.defaultChecked||i?A(a,t,i?u:pe(o._f)):C(t,u),f.mount&&X()}},te=(t,i,l,d,o)=>{let u=!1,g=!1;const V={name:t},j=!!(h(n,t)&&h(n,t)._f.disabled);if(!l||d){F.isDirty&&(g=r.isDirty,r.isDirty=V.isDirty=v(),u=g!==V.isDirty);const R=j||re(h(c,t),i);g=!!(!j&&h(r.dirtyFields,t)),R||j?E(r.dirtyFields,t):A(r.dirtyFields,t,!0),V.dirtyFields=r.dirtyFields,u=u||F.dirtyFields&&g!==!R}if(l){const R=h(r.touchedFields,t);R||(A(r.touchedFields,t,l),V.touchedFields=r.touchedFields,u=u||F.touchedFields&&R!==l)}return u&&o&&m.state.next(V),u?V:{}},ye=(t,i,l,d)=>{const o=h(r.errors,t),u=F.isValid&&J(i)&&r.isValid!==i;if(e.delayError&&l?(D=Ae(()=>K(t,l)),D(e.delayError)):(clearTimeout(w),D=null,l?A(r.errors,t,l):E(r.errors,t)),(l?!re(o,l):o)||!I(d)||u){const g={...d,...u&&J(i)?{isValid:i}:{},errors:r.errors,name:t};r={...r,...g},m.state.next(g)}},ee=async t=>{Y(t,!0);const i=await s.resolver(a,s.context,Hr(t||_.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return Y(t),i},se=async t=>{const{errors:i}=await ee(t);if(t)for(const l of t){const d=h(i,l);d?A(r.errors,l,d):E(r.errors,l)}else r.errors=i;return i},M=async(t,i,l={valid:!0})=>{for(const d in t){const o=t[d];if(o){const{_f:u,...g}=o;if(u){const V=_.array.has(u.name);Y([d],!0);const j=await rr(o,a,O,s.shouldUseNativeValidation&&!i,V);if(Y([d]),j[u.name]&&(l.valid=!1,i))break;!i&&(h(j,u.name)?V?Ur(r.errors,j,u.name):A(r.errors,u.name,j[u.name]):E(r.errors,u.name))}g&&await M(g,i,l)}}return l.valid},ge=()=>{for(const t of _.unMount){const i=h(n,t);i&&(i._f.refs?i._f.refs.every(l=>!Ee(l)):!Ee(i._f.ref))&&Fe(t)}_.unMount=new Set},v=(t,i)=>(t&&i&&A(a,t,i),!re(Me(),c)),b=(t,i,l)=>Ir(t,_,{...f.mount?a:S(i)?c:W(t)?{[t]:i}:i},l,i),k=t=>he(h(f.mount?a:c,t,e.shouldUnregister?h(c,t,[]):[])),C=(t,i,l={})=>{const d=h(n,t);let o=i;if(d){const u=d._f;u&&(!u.disabled&&A(a,t,dr(i,u)),o=ve(u.ref)&&L(i)?"":i,ur(u.ref)?[...u.ref.options].forEach(g=>g.selected=o.includes(g.value)):u.refs?de(u.ref)?u.refs.length>1?u.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(o)?!!o.find(V=>V===g.value):o===g.value)):u.refs[0]&&(u.refs[0].checked=!!o):u.refs.forEach(g=>g.checked=g.value===o):Re(u.ref)?u.ref.value="":(u.ref.value=o,u.ref.type||m.values.next({name:t,values:{...a}})))}(l.shouldDirty||l.shouldTouch)&&te(t,o,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&ue(t)},q=(t,i,l)=>{for(const d in i){const o=i[d],u=`${t}.${d}`,g=h(n,u);(_.array.has(t)||!be(o)||g&&!g._f)&&!ne(o)?q(u,o,l):C(u,o,l)}},U=(t,i,l={})=>{const d=h(n,t),o=_.array.has(t),u=P(i);A(a,t,u),o?(m.array.next({name:t,values:{...a}}),(F.isDirty||F.dirtyFields)&&l.shouldDirty&&m.state.next({name:t,dirtyFields:_e(c,a),isDirty:v(t,u)})):d&&!d._f&&!L(u)?q(t,u,l):C(t,u,l),Qe(t,_)&&m.state.next({...r}),m.values.next({name:f.mount?t:void 0,values:{...a}})},le=async t=>{const i=t.target;let l=i.name,d=!0;const o=h(n,l),u=()=>i.type?pe(o._f):pr(t),g=V=>{d=Number.isNaN(V)||V===h(a,l,V)};if(o){let V,j;const R=u(),ie=t.type===Ge.BLUR||t.type===Ge.FOCUS_OUT,mr=!Wr(o._f)&&!s.resolver&&!h(r.errors,l)&&!o._f.deps||$r(ie,h(r.touchedFields,l),r.isSubmitted,Q,$),we=Qe(l,_,ie);A(a,l,R),ie?(o._f.onBlur&&o._f.onBlur(t),D&&D(0)):o._f.onChange&&o._f.onChange(t);const De=te(l,R,ie,!1),vr=!I(De)||we;if(!ie&&m.values.next({name:l,type:t.type,values:{...a}}),mr)return F.isValid&&X(),vr&&m.state.next({name:l,...we?{}:De});if(!ie&&we&&m.state.next({...r}),s.resolver){const{errors:Ke}=await ee([l]);if(g(R),d){const xr=tr(r.errors,n,l),ze=tr(Ke,n,xr.name||l);V=ze.error,l=ze.name,j=I(Ke)}}else Y([l],!0),V=(await rr(o,a,O,s.shouldUseNativeValidation))[l],Y([l]),g(R),d&&(V?j=!1:F.isValid&&(j=await M(n,!0)));d&&(o._f.deps&&ue(o._f.deps),ye(l,j,V,De))}},ce=(t,i)=>{if(h(r.errors,i)&&t.focus)return t.focus(),1},ue=async(t,i={})=>{let l,d;const o=Ne(t);if(s.resolver){const u=await se(S(t)?t:o);l=I(u),d=t?!o.some(g=>h(u,g)):l}else t?(d=(await Promise.all(o.map(async u=>{const g=h(n,u);return await M(g&&g._f?{[u]:g}:g)}))).every(Boolean),!(!d&&!r.isValid)&&X()):d=l=await M(n);return m.state.next({...!W(t)||F.isValid&&l!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:l}:{},errors:r.errors}),i.shouldFocus&&!d&&fe(n,ce,t?o:_.mount),d},Me=t=>{const i={...c,...f.mount?a:{}};return S(t)?i:W(t)?h(i,t):t.map(l=>h(i,l))},Ue=(t,i)=>({invalid:!!h((i||r).errors,t),isDirty:!!h((i||r).dirtyFields,t),isTouched:!!h((i||r).touchedFields,t),isValidating:!!h((i||r).validatingFields,t),error:h((i||r).errors,t)}),hr=t=>{t&&Ne(t).forEach(i=>E(r.errors,i)),m.state.next({errors:t?r.errors:{}})},Pe=(t,i,l)=>{const d=(h(n,t,{_f:{}})._f||{}).ref;A(r.errors,t,{...i,ref:d}),m.state.next({name:t,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&d&&d.focus&&d.focus()},yr=(t,i)=>Z(t)?m.values.subscribe({next:l=>t(b(void 0,i),l)}):b(t,i,!0),Fe=(t,i={})=>{for(const l of t?Ne(t):_.mount)_.mount.delete(l),_.array.delete(l),i.keepValue||(E(n,l),E(a,l)),!i.keepError&&E(r.errors,l),!i.keepDirty&&E(r.dirtyFields,l),!i.keepTouched&&E(r.touchedFields,l),!i.keepIsValidating&&E(r.validatingFields,l),!s.shouldUnregister&&!i.keepDefaultValue&&E(c,l);m.values.next({values:{...a}}),m.state.next({...r,...i.keepDirty?{isDirty:v()}:{}}),!i.keepIsValid&&X()},Be=({disabled:t,name:i,field:l,fields:d,value:o})=>{if(J(t)){const u=t?void 0:S(o)?pe(l?l._f:h(d,i)._f):o;A(a,i,u),te(i,u,!1,!1,!0)}},Se=(t,i={})=>{let l=h(n,t);const d=J(i.disabled);return A(n,t,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:t}},name:t,mount:!0,...i}}),_.mount.add(t),l?Be({field:l,disabled:i.disabled,name:t,value:i.value}):N(t,!0,i.value),{...d?{disabled:i.disabled}:{},...s.progressive?{required:!!i.required,min:oe(i.min),max:oe(i.max),minLength:oe(i.minLength),maxLength:oe(i.maxLength),pattern:oe(i.pattern)}:{},name:t,onChange:le,onBlur:le,ref:o=>{if(o){Se(t,i),l=h(n,t);const u=S(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,g=qr(u),V=l._f.refs||[];if(g?V.find(j=>j===u):u===l._f.ref)return;A(n,t,{_f:{...l._f,...g?{refs:[...V.filter(Ee),u,...Array.isArray(h(c,t))?[{}]:[]],ref:{type:u.type,name:t}}:{ref:u}}}),N(t,!1,void 0,u)}else l=h(n,t,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(Cr(_.array,t)&&f.action)&&_.unMount.add(t)}}},qe=()=>s.shouldFocusError&&fe(n,ce,_.mount),gr=t=>{J(t)&&(m.state.next({disabled:t}),fe(n,(i,l)=>{let d=t;const o=h(n,l);o&&J(o._f.disabled)&&(d||(d=o._f.disabled)),i.disabled=d},0,!1))},He=(t,i)=>async l=>{let d;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let o=P(a);if(m.state.next({isSubmitting:!0}),s.resolver){const{errors:u,values:g}=await ee();r.errors=u,o=g}else await M(n);if(E(r.errors,"root"),I(r.errors)){m.state.next({errors:{}});try{await t(o,l)}catch(u){d=u}}else i&&await i({...r.errors},l),qe(),setTimeout(qe);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:I(r.errors)&&!d,submitCount:r.submitCount+1,errors:r.errors}),d)throw d},_r=(t,i={})=>{h(n,t)&&(S(i.defaultValue)?U(t,P(h(c,t))):(U(t,i.defaultValue),A(c,t,P(i.defaultValue))),i.keepTouched||E(r.touchedFields,t),i.keepDirty||(E(r.dirtyFields,t),r.isDirty=i.defaultValue?v(t,P(h(c,t))):v()),i.keepError||(E(r.errors,t),F.isValid&&X()),m.state.next({...r}))},We=(t,i={})=>{const l=t?P(t):c,d=P(l),o=I(t),u=o?c:d;if(i.keepDefaultValues||(c=l),!i.keepValues){if(i.keepDirtyValues)for(const g of _.mount)h(r.dirtyFields,g)?A(u,g,h(a,g)):U(g,h(u,g));else{if(Te&&S(t))for(const g of _.mount){const V=h(n,g);if(V&&V._f){const j=Array.isArray(V._f.refs)?V._f.refs[0]:V._f.ref;if(ve(j)){const R=j.closest("form");if(R){R.reset();break}}}}n={}}a=e.shouldUnregister?i.keepDefaultValues?P(c):{}:P(u),m.array.next({values:{...u}}),m.values.next({values:{...u}})}_={mount:i.keepDirtyValues?_.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!F.isValid||!!i.keepIsValid||!!i.keepDirtyValues,f.watch=!!e.shouldUnregister,m.state.next({submitCount:i.keepSubmitCount?r.submitCount:0,isDirty:o?!1:i.keepDirty?r.isDirty:!!(i.keepDefaultValues&&!re(t,c)),isSubmitted:i.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:o?[]:i.keepDirtyValues?i.keepDefaultValues&&a?_e(c,a):r.dirtyFields:i.keepDefaultValues&&t?_e(c,t):{},touchedFields:i.keepTouched?r.touchedFields:{},errors:i.keepErrors?r.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},$e=(t,i)=>We(Z(t)?t(a):t,i);return{control:{register:Se,unregister:Fe,getFieldState:Ue,handleSubmit:He,setError:Pe,_executeSchema:ee,_getWatch:b,_getDirty:v,_updateValid:X,_removeUnmounted:ge,_updateFieldArray:x,_updateDisabledField:Be,_getFieldArray:k,_reset:We,_resetDefaultValues:()=>Z(s.defaultValues)&&s.defaultValues().then(t=>{$e(t,s.resetOptions),m.state.next({isLoading:!1})}),_updateFormState:t=>{r={...r,...t}},_disableForm:gr,_subjects:m,_proxyFormState:F,_setErrors:z,get _fields(){return n},get _formValues(){return a},get _state(){return f},set _state(t){f=t},get _defaultValues(){return c},get _names(){return _},set _names(t){_=t},get _formState(){return r},set _formState(t){r=t},get _options(){return s},set _options(t){s={...s,...t}}},trigger:ue,register:Se,handleSubmit:He,watch:yr,setValue:U,getValues:Me,reset:$e,resetField:_r,clearErrors:hr,unregister:Fe,setError:Pe,setFocus:(t,i={})=>{const l=h(n,t),d=l&&l._f;if(d){const o=d.refs?d.refs[0]:d.ref;o.focus&&(o.focus(),i.shouldSelect&&o.select())}},getFieldState:Ue}}function Jr(e={}){const s=B.useRef(),r=B.useRef(),[n,c]=B.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...Gr(e),formState:n});const a=s.current.control;return a._options=e,Rr({subject:a._subjects.state,next:f=>{Or(f,a._proxyFormState,a._updateFormState,!0)&&c({...a._formState})}}),B.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),B.useEffect(()=>{if(a._proxyFormState.isDirty){const f=a._getDirty();f!==n.isDirty&&a._subjects.state.next({isDirty:f})}},[a,n.isDirty]),B.useEffect(()=>{e.values&&!re(e.values,r.current)?(a._reset(e.values,a._options.resetOptions),r.current=e.values,c(f=>({...f}))):a._resetDefaultValues()},[e.values,a]),B.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),B.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),B.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),s.current.formState=Tr(n,a),s.current}function Qr(){var F;const{register:e,handleSubmit:s,formState:r}=Jr(),[n,c]=T.useState(null),[a,f]=T.useState("pending"),[_,D]=T.useState(null),w=({name:m})=>{D(null),f("loading"),Le.getSingleCharacterByName({name:m}).then($=>{$.length?(c($[0]),f("success")):(c(null),f("absence"))}).catch($=>{D($),f("failure")})};return T.useEffect(()=>{r.errors.name?f("require"):f("pending")},[(F=r.errors.name)==null?void 0:F.message]),y.jsxs("div",{className:"character-search",children:[y.jsxs("div",{className:"character-search__form",children:[y.jsx("h3",{className:"character-search__form-title",children:"Or find a character by name:"}),y.jsxs("form",{className:"character-search__form-body",onSubmit:s(w),children:[y.jsx("input",{type:"text",className:"character-search__form-input",placeholder:"Enter name",defaultValue:"",...e("name",{required:!0})}),y.jsx("button",{className:"button button_red character-search__form-button",type:"submit",children:"FIND"})]})]}),y.jsxs("div",{className:"character-search__main",children:[a==="loading"&&y.jsx(je,{className:"character-search__main-spinner"}),a==="failure"&&y.jsx(Ce,{className:"character-search__main-error",info:_.message}),a==="require"&&y.jsx("p",{className:"character-search__main-warning",children:"Please, enter a character name!"}),a==="absence"&&y.jsx("p",{className:"character-search__main-text",children:"The character was not found. Check the name and try again."}),a==="success"&&y.jsxs("div",{className:"character-search__main-result",children:[y.jsx("p",{className:"character-search__main-reuslt-text",children:`There is! Visit ${n.name} page?`}),y.jsx(br,{className:"button button_black character-search__main-button",to:`/characters/${n.id}`,children:"TO PAGE"})]})]})]})}function Xr(){const[e,s]=T.useState(null),r=T.useCallback(n=>{s(n)},[]);return y.jsx("section",{className:"section all-caharacters",children:y.jsxs("div",{className:"container all-caharacters__container",children:[y.jsx("h2",{className:"title all-caharacters__title",children:"All characters"}),y.jsxs("div",{className:"all-caharacters__body",children:[y.jsx("div",{className:"all-caharacters__list",children:y.jsx(Er,{onSelect:r})}),y.jsxs("div",{className:"all-caharacters__sidebar",children:[y.jsx(Dr,{selected:e}),y.jsx(Qr,{})]})]})]})})}function at(){return y.jsxs(y.Fragment,{children:[y.jsxs(Vr,{children:[y.jsx("meta",{name:"description",content:"Marvel data base. Page with all characters"}),y.jsx("title",{children:"All Characters – Marvel Data Base"})]}),y.jsx(Ar,{title:"Marvel characters"}),y.jsx(Xr,{})]})}export{at as default};
